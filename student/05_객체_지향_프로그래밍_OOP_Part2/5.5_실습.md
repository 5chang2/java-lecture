# 5.5. 실습: OOP Part 2 종합

> 상속, 다형성, 추상 클래스, 인터페이스, 컴포지션을 활용한 종합 실습 문제입니다.

---

## 문제 1: 동물 시스템 (상속 & 다형성)

**학습 목표:**
- 추상 클래스 작성 및 상속
- 메서드 오버라이딩
- 다형성 활용

**요구사항:**

1. `Animal` 추상 클래스 작성
   - 필드: `name` (이름), `age` (나이)
   - 생성자: name, age 초기화
   - 일반 메서드: `showInfo()` - 이름과 나이 출력
   - 추상 메서드: `makeSound()` - 울음소리

2. `Dog`, `Cat`, `Cow` 클래스 작성
   - Animal 상속
   - `makeSound()` 오버라이딩
   - Dog: 품종(breed) 필드 추가 및 `showInfo()` 오버라이딩
   - Cat: `purr()` 메서드 추가 (골골대기)

3. Main 클래스에서 다형성 활용
   - Animal 배열에 여러 동물 저장
   - 반복문으로 모든 동물의 정보 및 울음소리 출력
   - `instanceof`를 사용하여 Cat의 `purr()` 메서드 호출

**테스트 코드:**
```java
public class Main {
    public static void main(String[] args) {
        Animal[] animals = {
            new Dog("백구", 3, "진돗개"),
            new Cat("나비", 2),
            new Cow("얼룩이", 5)
        };

        for (Animal animal : animals) {
            animal.showInfo();
            animal.makeSound();
            System.out.println();
        }

        // instanceof 활용
        for (Animal animal : animals) {
            if (animal instanceof Cat) {
                Cat cat = (Cat) animal;
                cat.purr();
            }
        }
    }
}
```

**예상 출력:**
```
이름: 백구, 나이: 3세, 품종: 진돗개
멍멍!

이름: 나비, 나이: 2세
야옹~

이름: 얼룩이, 나이: 5세
음메~

나비가 골골거립니다.
```

<details>
<summary>해답</summary>

**Animal.java**
```java
public abstract class Animal {
    protected String name;
    protected int age;

    public Animal(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public void showInfo() {
        System.out.println("이름: " + name + ", 나이: " + age + "세");
    }

    public abstract void makeSound();
}
```

**Dog.java**
```java
public class Dog extends Animal {
    private String breed;

    public Dog(String name, int age, String breed) {
        super(name, age);
        this.breed = breed;
    }

    @Override
    public void showInfo() {
        System.out.println("이름: " + name + ", 나이: " + age + "세, 품종: " + breed);
    }

    @Override
    public void makeSound() {
        System.out.println("멍멍!");
    }
}
```

**Cat.java**
```java
public class Cat extends Animal {
    public Cat(String name, int age) {
        super(name, age);
    }

    @Override
    public void makeSound() {
        System.out.println("야옹~");
    }

    public void purr() {
        System.out.println(name + "가 골골거립니다.");
    }
}
```

**Cow.java**
```java
public class Cow extends Animal {
    public Cow(String name, int age) {
        super(name, age);
    }

    @Override
    public void makeSound() {
        System.out.println("음메~");
    }
}
```
</details>

---

## 문제 2: 능력 시스템 (인터페이스 & 다중 구현)

**학습 목표:**
- 인터페이스 작성 및 구현
- 다중 구현 활용
- 추상 클래스 + 인터페이스 조합

**요구사항:**

1. `Flyable` 인터페이스: `fly()` 메서드
2. `Swimmable` 인터페이스: `swim()` 메서드
3. `Animal` 추상 클래스: `name` 필드, `makeSound()` 추상 메서드
4. 구체 클래스 작성
   - `Duck`: Animal 상속, Flyable + Swimmable 구현
   - `Fish`: Animal 상속, Swimmable 구현
   - `Eagle`: Animal 상속, Flyable 구현
5. `AnimalTrainer` 클래스
   - `trainFlying(Flyable animal)`: 날기 훈련
   - `trainSwimming(Swimmable animal)`: 수영 훈련

**테스트 코드:**
```java
public class Main {
    public static void main(String[] args) {
        Duck duck = new Duck("오리");
        Fish fish = new Fish("잉어");
        Eagle eagle = new Eagle("독수리");

        AnimalTrainer trainer = new AnimalTrainer();

        trainer.trainFlying(duck);
        trainer.trainSwimming(duck);
        trainer.trainSwimming(fish);
        trainer.trainFlying(eagle);
    }
}
```

<details>
<summary>해답</summary>

**Flyable.java**
```java
public interface Flyable {
    void fly();
}
```

**Swimmable.java**
```java
public interface Swimmable {
    void swim();
}
```

**Animal.java**
```java
public abstract class Animal {
    protected String name;

    public Animal(String name) {
        this.name = name;
    }

    public abstract void makeSound();
}
```

**Duck.java**
```java
public class Duck extends Animal implements Flyable, Swimmable {
    public Duck(String name) {
        super(name);
    }

    @Override
    public void makeSound() {
        System.out.println("꽥꽥!");
    }

    @Override
    public void fly() {
        System.out.println(name + "가 날아갑니다!");
    }

    @Override
    public void swim() {
        System.out.println(name + "가 헤엄칩니다!");
    }
}
```

**Fish.java**
```java
public class Fish extends Animal implements Swimmable {
    public Fish(String name) {
        super(name);
    }

    @Override
    public void makeSound() {
        System.out.println("뻐끔뻐끔");
    }

    @Override
    public void swim() {
        System.out.println(name + "가 헤엄칩니다!");
    }
}
```

**Eagle.java**
```java
public class Eagle extends Animal implements Flyable {
    public Eagle(String name) {
        super(name);
    }

    @Override
    public void makeSound() {
        System.out.println("끼요오");
    }

    @Override
    public void fly() {
        System.out.println(name + "가 날아갑니다!");
    }
}
```

**AnimalTrainer.java**
```java
public class AnimalTrainer {
    public void trainFlying(Flyable flyable) {
        System.out.println("날기 훈련을 시작합니다.");
        flyable.fly();
        System.out.println();
    }

    public void trainSwimming(Swimmable swimmable) {
        System.out.println("수영 훈련을 시작합니다.");
        swimmable.swim();
        System.out.println();
    }
}
```
</details>

---

## 문제 3: RPG 게임 캐릭터 시스템 (컴포지션 & 종합)

**학습 목표:**
- 컴포지션 활용
- 상속, 인터페이스, 컴포지션 종합 활용
- 런타임 동작 변경

**요구사항:**

1. `Weapon` 인터페이스: `attack()`, `getDamage()`, `getName()`
2. 무기 구현 클래스: `Sword`, `Gun`, `MagicWand`
3. `Skill` 인터페이스: `use()`, `getManaCost()`
4. 스킬 구현 클래스: `FireBall`, `Heal`
5. `Character` 추상 클래스: `name`, `health`, `level`, `weapon` (컴포지션)
   - `equipWeapon(Weapon weapon)`: 무기 장착
   - `attack()`: 무기로 공격
   - `takeDamage(int damage)`: 데미지 받기
   - `isAlive()`: 생존 여부
   - `levelUp()`: 레벨업 (추상 메서드)
6. 캐릭터 구현 클래스
   - `Warrior`: 초기 체력 120, 레벨업 시 체력 +30
   - `Mage`: 초기 체력 70, 레벨업 시 체력 +15, `mana` 필드, `useSkill(Skill skill)` 메서드

**테스트 코드:**
```java
public class Main {
    public static void main(String[] args) {
        Warrior warrior = new Warrior("전사");
        Mage mage = new Mage("마법사");

        System.out.println("=== 무기 없이 전투 ===");
        warrior.attack();
        mage.attack();

        System.out.println("\n=== 무기 장착 ===");
        warrior.equipWeapon(new Sword());
        mage.equipWeapon(new MagicWand());

        warrior.attack();
        mage.attack();

        System.out.println("\n=== 마법사 스킬 사용 ===");
        mage.useSkill(new FireBall());
        mage.useSkill(new Heal());
    }
}
```

<details>
<summary>해답</summary>

**Weapon.java**
```java
public interface Weapon {
    void attack();
    int getDamage();
    String getName();
}
```

**Sword.java**
```java
public class Sword implements Weapon {
    @Override
    public void attack() {
        System.out.println("칼로 베기!");
    }

    @Override
    public int getDamage() {
        return 20;
    }

    @Override
    public String getName() {
        return "검";
    }
}
```

**Gun.java**
```java
public class Gun implements Weapon {
    @Override
    public void attack() {
        System.out.println("총 발사!");
    }

    @Override
    public int getDamage() {
        return 30;
    }

    @Override
    public String getName() {
        return "총";
    }
}
```

**MagicWand.java**
```java
public class MagicWand implements Weapon {
    @Override
    public void attack() {
        System.out.println("마법 발사!");
    }

    @Override
    public int getDamage() {
        return 25;
    }

    @Override
    public String getName() {
        return "마법 지팡이";
    }
}
```

**Skill.java**
```java
public interface Skill {
    void use();
    int getManaCost();
}
```

**FireBall.java**
```java
public class FireBall implements Skill {
    @Override
    public void use() {
        System.out.println("화염구 발사!");
    }

    @Override
    public int getManaCost() {
        return 20;
    }
}
```

**Heal.java**
```java
public class Heal implements Skill {
    @Override
    public void use() {
        System.out.println("체력 회복!");
    }

    @Override
    public int getManaCost() {
        return 15;
    }
}
```

**Character.java**
```java
public abstract class Character {
    protected String name;
    protected int health;
    protected int level;
    protected Weapon weapon;

    public Character(String name, int health) {
        this.name = name;
        this.health = health;
        this.level = 1;
    }

    public void equipWeapon(Weapon weapon) {
        this.weapon = weapon;
        System.out.println(name + "이(가) " + weapon.getName() + "을(를) 장착했습니다.");
    }

    public void attack() {
        if (weapon != null) {
            System.out.print(name + ": ");
            weapon.attack();
        } else {
            System.out.println(name + ": 맨손 공격!");
        }
    }

    public void takeDamage(int damage) {
        this.health -= damage;
        System.out.println(name + "이(가) " + damage + "의 데미지를 입었습니다. 현재 체력: " + health);
    }

    public boolean isAlive() {
        return health > 0;
    }

    public int getHealth() {
        return health;
    }

    public abstract void levelUp();
}
```

**Warrior.java**
```java
public class Warrior extends Character {
    private int rage;

    public Warrior(String name) {
        super(name, 120);
        this.rage = 0;
    }

    @Override
    public void levelUp() {
        this.level++;
        this.health += 30;
        System.out.println(name + " 레벨업! 체력 +30");
    }
}
```

**Mage.java**
```java
public class Mage extends Character {
    private int mana;

    public Mage(String name) {
        super(name, 70);
        this.mana = 100;
    }

    public void useSkill(Skill skill) {
        if (this.mana >= skill.getManaCost()) {
            System.out.print(name + ": ");
            skill.use();
            this.mana -= skill.getManaCost();
        } else {
            System.out.println("마나가 부족합니다.");
        }
    }

    @Override
    public void levelUp() {
        this.level++;
        this.health += 15;
        System.out.println(name + " 레벨업! 체력 +15");
    }
}
```
</details>

---
