# 3.1. SELECT 기본 문법

> SELECT 문의 기본 구조를 이해하고, 테이블에서 데이터를 조회할 수 있다.

---

## 실습 준비

이 섹션에서는 두 가지 샘플 데이터베이스를 사용합니다:
- **world**: 강의 설명 및 예제 (국가, 도시 데이터)
- **sakila**: 실습 문제 (DVD 렌탈 시스템)

```sql
-- 강의 예제용
USE world;

-- 실습 문제용
USE sakila;
```

데이터베이스 설치 방법은 [README.md](./README.md)를 참고하세요.

---

## 1. SQL이란?

**SQL**(Structured Query Language)은 데이터베이스에 저장된 데이터를 관리하고 처리하기 위한 **표준 언어**입니다.

### SQL의 역할

데이터베이스에게 다음과 같은 명령을 내리는 도구입니다:
- **SELECT**: 데이터 조회
- **INSERT**: 데이터 추가
- **UPDATE**: 데이터 수정
- **DELETE**: 데이터 삭제

---

## 2. SELECT 기본 문법 구조

`SELECT`는 테이블에서 데이터를 조회하는 명령어입니다. **가장 중요하고 자주 사용**합니다.

### 기본 구조

```sql
SELECT
    컬럼1,           -- 조회할 컬럼
    컬럼2,
    컬럼3
FROM 테이블명;      -- 어느 테이블에서 조회할지
```

**핵심 키워드**:
- `SELECT`: 무엇을 조회할지
- `FROM`: 어디서 조회할지

---

## 3. SELECT 기본 문법

### 3.1. 모든 컬럼 조회 (*)

```sql
-- country 테이블의 모든 데이터 조회
SELECT * FROM country;
```

**결과 예시**:
```
+------+-------------+---------------+-----------+------------+
|Code  | Name        | Continent     | Region    | Population |
+------+-------------+---------------+-----------+------------+
|ABW   | Aruba       | North America | Caribbean | 103000     |
|AFG   | Afghanistan | Asia          | Southern  | 22720000   |
|AGO   | Angola      | Africa        | Central   | 12878000   |
+------+-------------+---------------+-----------+------------+
```

**`*` 사용 시 주의점**:
- 개발 중 탐색 목적으로는 유용
- **프로덕션 코드에서는 비권장**: 필요한 컬럼만 명시하는 것이 성능에 유리

### 3.2. 특정 컬럼만 조회

```sql
-- 국가명과 인구만 조회 (상위 5개)
SELECT Name, Population
FROM country
LIMIT 5;
```

**결과 예시**:
```
+-------------+------------+
| Name        | Population |
+-------------+------------+
| Aruba       | 103000     |
| Afghanistan | 22720000   |
| Angola      | 12878000   |
| Anguilla    | 8000       |
| Albania     | 3401200    |
+-------------+------------+
```

### 3.3. 컬럼에 별칭(Alias) 지정

`AS` 키워드로 컬럼명에 별칭을 붙일 수 있습니다.

```sql
-- 컬럼명을 한글로 표시
SELECT
    Name AS 국가명,
    Continent AS 대륙,
    Population AS 인구
FROM country
LIMIT 5;
```

**결과 예시**:
```
+-------------+---------------+----------+
| 국가명      | 대륙          | 인구     |
+-------------+---------------+----------+
| Aruba       | North America | 103000   |
| Afghanistan | Asia          | 22720000 |
| Angola      | Africa        | 12878000 |
| Anguilla    | North America | 8000     |
| Albania     | Europe        | 3401200  |
+-------------+---------------+----------+
```

**별칭 사용 팁**:
- `AS` 키워드는 생략 가능: `SELECT Name 국가명 FROM country;`
- 별칭에 공백이 있으면 따옴표 필요: `AS '국가 이름'`

### 3.4. 중복 제거 (DISTINCT)

`DISTINCT`는 중복된 행을 제거하고 고유한 값만 반환합니다.

```sql
-- 대륙 목록 조회 (중복 제거)
SELECT DISTINCT Continent FROM country;
```

**결과**:
```
+---------------+
| Continent     |
+---------------+
| Asia          |
| Europe        |
| North America |
| Africa        |
| Oceania       |
| Antarctica    |
| South America |
+---------------+
```

**DISTINCT 활용 예시**:
```sql
-- 지역 목록 조회
SELECT DISTINCT Region FROM country;

-- 대륙과 지역 조합 (중복 제거)
SELECT DISTINCT Continent, Region FROM country;
```

---

## 4. world 데이터베이스 탐색

### 4.1. 테이블 구조 확인

```sql
-- country 테이블 구조 확인
DESCRIBE country;
-- 또는
SHOW COLUMNS FROM country;
```

### 4.2. 기본 조회 연습

```sql
-- 1. 모든 국가 조회 (상위 10개)
SELECT * FROM country LIMIT 10;

-- 2. 국가명과 인구만 조회
SELECT Name, Population FROM country LIMIT 10;

-- 3. 대륙 목록 조회 (중복 제거)
SELECT DISTINCT Continent FROM country;

-- 4. 컬럼 별칭 사용
SELECT
    Name AS 국가명,
    Continent AS 대륙,
    Population AS 인구,
    LifeExpectancy AS 평균수명
FROM country
LIMIT 10;
```

### 4.3. city 테이블 탐색

```sql
-- 도시 정보 조회
SELECT * FROM city LIMIT 10;

-- 도시명과 인구
SELECT Name, Population FROM city LIMIT 10;

-- 국가별 도시 (중복 제거)
SELECT DISTINCT CountryCode FROM city;
```

---

## 실습 문제

이제 **sakila 데이터베이스**로 실습해봅시다.

```sql
USE sakila;
```

### 문제 1: 기본 조회

다음 요구사항에 맞는 SQL을 작성하세요.

1. `film` 테이블의 모든 데이터 조회 (상위 10개)
2. 영화 제목(`title`)만 조회 (상위 10개)
3. 제목(`title`)과 개봉년도(`release_year`) 조회 (상위 10개)

**예상 답**:
```sql
-- 1. 모든 영화 정보 조회
SELECT * FROM film LIMIT 10;

-- 2. 영화 제목만 조회
SELECT title FROM film LIMIT 10;

-- 3. 제목과 개봉년도 조회
SELECT title, release_year FROM film LIMIT 10;
```

### 문제 2: 별칭 사용

다음 요구사항에 맞는 SQL을 작성하세요.

`film` 테이블에서 영화 정보를 조회하되, 컬럼명을 다음과 같이 표시하세요:
- `title` → `영화제목`
- `rental_rate` → `대여료`
- `length` → `상영시간`

상위 10개만 조회하세요.

**예상 답**:
```sql
SELECT
    title AS 영화제목,
    rental_rate AS 대여료,
    length AS 상영시간
FROM film
LIMIT 10;
```

### 문제 3: DISTINCT 활용

1. `film` 테이블에서 **중복을 제거한** 등급(`rating`) 목록을 조회하세요.
2. `actor` 테이블에서 **중복을 제거한** 성(`last_name`) 목록을 조회하세요. (상위 20개)

**예상 답**:
```sql
-- 1. 영화 등급 목록 (중복 제거)
SELECT DISTINCT rating FROM film;

-- 2. 배우 성 목록 (중복 제거, 상위 20개)
SELECT DISTINCT last_name FROM actor LIMIT 20;
```

### 문제 4: 종합 문제

`actor` 테이블에서 다음 정보를 조회하세요:
- 배우의 이름(`first_name`)과 성(`last_name`)
- 컬럼 별칭: `이름`, `성`
- 상위 15개만 조회

**예상 답**:
```sql
SELECT
    first_name AS 이름,
    last_name AS 성
FROM actor
LIMIT 15;
```

---

## 5. 강사 가이드

### 핵심 포인트

1. **SELECT는 읽기 전용**: 데이터를 변경하지 않음
2. **`*` 사용 주의**: 프로덕션에서는 필요한 컬럼만 명시
3. **별칭 활용**: 결과를 더 이해하기 쉽게
4. **DISTINCT 비용**: 중복 제거는 정렬이 필요하므로 대용량 데이터에서는 느릴 수 있음

### 데이터베이스 활용 전략

1. **world DB (강의 설명/예제)**
   - 단순하고 직관적인 데이터 (국가, 도시)
   - 개념 설명에 적합
   - 학생들이 쉽게 이해할 수 있는 도메인

2. **sakila DB (실습 문제)**
   - 실무에 가까운 DVD 렌탈 시스템
   - 영화, 배우, 고객, 대여 등 복잡한 관계
   - 실전 감각을 기를 수 있음

3. **수업 진행 팁**
   - 먼저 world DB로 개념 설명 및 시연
   - 이해를 확인한 후 sakila DB로 실습 문제 풀이
   - 학생들이 두 DB를 번갈아 사용하며 연습하도록 유도

### 자주 하는 질문

**Q: SELECT 문에서 컬럼 순서가 중요한가요?**
A: 조회 결과의 표시 순서만 바뀝니다. 실제 테이블 구조는 변경되지 않습니다.

**Q: `*`를 쓰면 안 되나요?**
A: 탐색 목적으로는 괜찮지만, 실제 애플리케이션에서는 필요한 컬럼만 명시하는 것이 성능과 유지보수에 유리합니다.

**Q: `AS` 없이 별칭을 쓸 수 있나요?**
A: 네, `SELECT username 회원명 FROM users;`처럼 가능합니다. 하지만 `AS`를 명시하는 것이 가독성에 좋습니다.

**Q: DISTINCT는 여러 컬럼에도 적용되나요?**
A: 네. `SELECT DISTINCT col1, col2 FROM table;`은 (col1, col2) 조합이 고유한 행만 반환합니다.

### 실습 진행 팁

1. **샘플 DB 설치**: README.md 참고하여 world, sakila 설치
2. **SQL 클라이언트 실행**: MySQL Workbench 또는 터미널
3. **강의 시연**: `USE world;` → 개념 설명 및 예제
4. **실습 문제**: `USE sakila;` → 학생들이 직접 풀이
5. **단계별 실습**: `*` → 특정 컬럼 → 별칭 → DISTINCT 순서
6. **결과 확인 습관**: 쿼리 실행 후 결과를 항상 확인

---

## 요약

- **SQL**: 데이터베이스 조작 언어
- **SELECT**: 데이터 조회 (가장 중요)
- **기본 구조**: `SELECT 컬럼 FROM 테이블;`
- **`*`**: 모든 컬럼 조회
- **AS**: 컬럼 별칭 지정
- **DISTINCT**: 중복 제거
- **샘플 데이터베이스**:
  - **world**: 강의 예제용 (239개 국가, 4,079개 도시)
  - **sakila**: 실습 문제용 (DVD 렌탈 시스템)

**참고**: SQL 기본 규칙과 명령어 분류는 [1.4 개발 환경 설정](../01_데이터베이스_기초/1.4_개발_환경_설정.md)에서 학습했습니다.

**다음 단계**: WHERE 절로 조건에 맞는 데이터만 필터링하는 방법을 배웁니다!
