# 3.1. SELECT 기본 문법

> SELECT 문의 기본 구조를 이해하고, 테이블에서 데이터를 조회할 수 있다.

---

## 1. SQL이란?

**SQL**(Structured Query Language)은 데이터베이스에 저장된 데이터를 관리하고 처리하기 위한 **표준 언어**입니다.

### SQL의 역할

데이터베이스에게 다음과 같은 명령을 내리는 도구입니다:
- **SELECT**: 데이터 조회
- **INSERT**: 데이터 추가
- **UPDATE**: 데이터 수정
- **DELETE**: 데이터 삭제

---

## 2. SQL 기본 규칙

### 2.1. 세미콜론(;)으로 마무리

모든 SQL 문은 세미콜론으로 끝납니다.

```sql
SELECT * FROM users;
```

### 2.2. 대소문자 구분

**SQL 키워드**: 대소문자 구분 안 함 (관례상 대문자 사용)
```sql
SELECT * FROM users;  -- 권장
select * from users;  -- 동작하지만 비권장
```

**테이블/컬럼명**: DBMS에 따라 다름
- MySQL: 대소문자 구분 안 함 (기본)
- PostgreSQL, Oracle: 대소문자 구분 (기본)

### 2.3. 주석 작성

```sql
-- 한 줄 주석

/*
  여러 줄 주석
  여러 줄에 걸쳐 설명 작성
*/

SELECT
    user_id,    -- 회원 ID
    username    -- 회원명
FROM users;
```

### 2.4. 공백과 들여쓰기

SQL은 여러 공백을 하나의 공백으로 취급합니다. 가독성을 위해 적절히 줄바꿈을 사용하세요.

```sql
-- 비권장: 한 줄에 모두 작성
SELECT user_id, username, email FROM users WHERE age > 20 ORDER BY user_id;

-- 권장: 가독성 있게 작성
SELECT
    user_id,
    username,
    email
FROM users
WHERE age > 20
ORDER BY user_id;
```

---

## 3. SQL 명령어 분류

SQL 명령어는 기능에 따라 4가지로 분류됩니다.

### 3.1. DDL (Data Definition Language, 데이터 정의어)

데이터베이스 구조를 정의하고 변경합니다.

```sql
CREATE TABLE users (...);  -- 테이블 생성
ALTER TABLE users ...;     -- 테이블 구조 변경
DROP TABLE users;          -- 테이블 삭제
```

### 3.2. DML (Data Manipulation Language, 데이터 조작어)

실제 데이터를 조작합니다. **가장 자주 사용**합니다.

```sql
SELECT * FROM users;              -- 조회
INSERT INTO users (...) VALUES (...);  -- 추가
UPDATE users SET ...;             -- 수정
DELETE FROM users WHERE ...;      -- 삭제
```

### 3.3. DCL (Data Control Language, 데이터 제어어)

접근 권한을 제어합니다.

```sql
GRANT SELECT ON users TO user1;   -- 권한 부여
REVOKE SELECT ON users FROM user1; -- 권한 회수
```

### 3.4. TCL (Transaction Control Language, 트랜잭션 제어어)

트랜잭션을 제어합니다.

```sql
COMMIT;    -- 변경사항 확정
ROLLBACK;  -- 변경사항 취소
```

---

## 4. SELECT 기본 문법

`SELECT`는 테이블에서 데이터를 조회하는 명령어입니다. **가장 중요하고 자주 사용**합니다.

### 4.1. 모든 컬럼 조회 (*)

```sql
-- users 테이블의 모든 데이터 조회
SELECT * FROM users;
```

**결과 예시**:
```
+--------+----------+------------------+-----+
|user_id | username | email            | age |
+--------+----------+------------------+-----+
| 1      | hong     | hong@email.com   | 25  |
| 2      | kim      | kim@email.com    | 30  |
| 3      | lee      | lee@email.com    | 22  |
+--------+----------+------------------+-----+
```

**`*` 사용 시 주의점**:
- 개발 중 탐색 목적으로는 유용
- **프로덕션 코드에서는 비권장**: 필요한 컬럼만 명시하는 것이 성능에 유리

### 4.2. 특정 컬럼만 조회

```sql
-- username과 email만 조회
SELECT username, email FROM users;
```

**결과 예시**:
```
+----------+------------------+
| username | email            |
+----------+------------------+
| hong     | hong@email.com   |
| kim      | kim@email.com    |
| lee      | lee@email.com    |
+----------+------------------+
```

### 4.3. 컬럼에 별칭(Alias) 지정

`AS` 키워드로 컬럼명에 별칭을 붙일 수 있습니다.

```sql
-- 컬럼명을 한글로 표시
SELECT
    username AS 회원명,
    email AS 이메일,
    age AS 나이
FROM users;
```

**결과 예시**:
```
+--------+------------------+-----+
| 회원명 | 이메일           | 나이|
+--------+------------------+-----+
| hong   | hong@email.com   | 25  |
| kim    | kim@email.com    | 30  |
+--------+------------------+-----+
```

**별칭 사용 팁**:
- `AS` 키워드는 생략 가능: `SELECT username 회원명 FROM users;`
- 별칭에 공백이 있으면 따옴표 필요: `AS '회원 이름'`

### 4.4. 중복 제거 (DISTINCT)

`DISTINCT`는 중복된 행을 제거하고 고유한 값만 반환합니다.

```sql
-- 회원들의 나이 목록 (중복 제거)
SELECT DISTINCT age FROM users;
```

**Before DISTINCT**:
```
+-----+
| age |
+-----+
| 25  |
| 30  |
| 22  |
| 25  |  -- 중복
| 30  |  -- 중복
+-----+
```

**After DISTINCT**:
```
+-----+
| age |
+-----+
| 22  |
| 25  |
| 30  |
+-----+
```

---

## 5. 실습용 테이블 생성

이후 실습을 위해 샘플 테이블과 데이터를 생성합니다.

### 5.1. 데이터베이스 생성

```sql
-- 데이터베이스 생성
CREATE DATABASE shop_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 데이터베이스 선택
USE shop_db;
```

### 5.2. 상품 테이블 생성

```sql
CREATE TABLE products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,
    product_name VARCHAR(100) NOT NULL,
    category VARCHAR(50) NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    stock INT DEFAULT 0
);
```

### 5.3. 샘플 데이터 삽입

```sql
INSERT INTO products (product_name, category, price, stock) VALUES
('노트북', '전자제품', 1500000, 10),
('마우스', '전자제품', 25000, 50),
('키보드', '전자제품', 80000, 30),
('모니터', '전자제품', 300000, 15),
('책상', '가구', 150000, 5),
('의자', '가구', 200000, 8),
('노트', '문구', 2000, 100),
('펜', '문구', 1000, 200);
```

### 5.4. 기본 조회 연습

```sql
-- 1. 모든 상품 조회
SELECT * FROM products;

-- 2. 상품명과 가격만 조회
SELECT product_name, price FROM products;

-- 3. 카테고리 목록 조회 (중복 제거)
SELECT DISTINCT category FROM products;

-- 4. 가격에 '원' 단위 표시 (별칭 사용)
SELECT
    product_name AS 상품명,
    price AS 가격,
    stock AS 재고
FROM products;
```

---

## 6. SELECT 기본 문법 구조

```sql
SELECT
    컬럼1,           -- 조회할 컬럼
    컬럼2,
    컬럼3
FROM 테이블명;      -- 어느 테이블에서 조회할지
```

**핵심 키워드**:
- `SELECT`: 무엇을 조회할지
- `FROM`: 어디서 조회할지

---

## 실습 문제

### 문제 1: 기본 조회

다음 요구사항에 맞는 SQL을 작성하세요.

1. `products` 테이블의 모든 데이터 조회
2. 상품명(`product_name`)만 조회
3. 카테고리(`category`)와 상품명 조회

**예상 답**:
```sql
-- 1
SELECT * FROM products;

-- 2
SELECT product_name FROM products;

-- 3
SELECT category, product_name FROM products;
```

### 문제 2: 별칭 사용

다음 요구사항에 맞는 SQL을 작성하세요.

상품 정보를 조회하되, 컬럼명을 다음과 같이 표시하세요:
- `product_name` → `상품`
- `price` → `가격`
- `stock` → `재고량`

**예상 답**:
```sql
SELECT
    product_name AS 상품,
    price AS 가격,
    stock AS 재고량
FROM products;
```

### 문제 3: DISTINCT 활용

`products` 테이블에서 **중복을 제거한** 카테고리 목록을 조회하세요.

**예상 답**:
```sql
SELECT DISTINCT category FROM products;
```

---

## 강사 가이드

### 핵심 포인트

1. **SELECT는 읽기 전용**: 데이터를 변경하지 않음
2. **`*` 사용 주의**: 프로덕션에서는 필요한 컬럼만 명시
3. **별칭 활용**: 결과를 더 이해하기 쉽게
4. **DISTINCT 비용**: 중복 제거는 정렬이 필요하므로 대용량 데이터에서는 느릴 수 있음

### 자주 하는 질문

**Q: SELECT 문에서 컬럼 순서가 중요한가요?**
A: 조회 결과의 표시 순서만 바뀝니다. 실제 테이블 구조는 변경되지 않습니다.

**Q: `*`를 쓰면 안 되나요?**
A: 탐색 목적으로는 괜찮지만, 실제 애플리케이션에서는 필요한 컬럼만 명시하는 것이 성능과 유지보수에 유리합니다.

**Q: `AS` 없이 별칭을 쓸 수 있나요?**
A: 네, `SELECT username 회원명 FROM users;`처럼 가능합니다. 하지만 `AS`를 명시하는 것이 가독성에 좋습니다.

**Q: DISTINCT는 여러 컬럼에도 적용되나요?**
A: 네. `SELECT DISTINCT col1, col2 FROM table;`은 (col1, col2) 조합이 고유한 행만 반환합니다.

### 실습 진행 팁

1. **SQL 클라이언트 실행**: MySQL Workbench 또는 터미널
2. **샘플 DB 생성**: shop_db 생성 및 데이터 삽입
3. **단계별 실습**: `*` → 특정 컬럼 → 별칭 → DISTINCT 순서
4. **결과 확인 습관**: 쿼리 실행 후 결과를 항상 확인

---

## 요약

- **SQL**: 데이터베이스 조작 언어
- **SELECT**: 데이터 조회 (가장 중요)
- **기본 구조**: `SELECT 컬럼 FROM 테이블;`
- **`*`**: 모든 컬럼 조회
- **AS**: 컬럼 별칭 지정
- **DISTINCT**: 중복 제거
- **주석**: `--` (한 줄), `/* */` (여러 줄)
- **세미콜론**: 모든 SQL 문의 끝에 필수

**다음 단계**: WHERE 절로 조건에 맞는 데이터만 필터링하는 방법을 배웁니다!
