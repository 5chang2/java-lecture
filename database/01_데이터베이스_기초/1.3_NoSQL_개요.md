# 1.3 NoSQL 개요

## 학습 목표
- NoSQL의 개념과 등장 배경을 이해합니다
- RDBMS와 NoSQL의 차이점을 이해합니다
- NoSQL의 주요 유형을 알아봅니다
- 언제 NoSQL을 사용해야 하는지 판단할 수 있습니다

---

## 1. NoSQL이란?

### NoSQL의 정의
**NoSQL (Not Only SQL)**은 관계형 데이터베이스(RDBMS)가 아닌 다른 형태로 데이터를 저장하는 데이터베이스입니다.

**이름의 의미**
- "No SQL"이 아니라 "Not Only SQL"
- SQL을 완전히 배제하는 것이 아니라, SQL 외의 다른 방법도 사용한다는 의미

**핵심 특징**
- 고정된 테이블 스키마가 없음 (스키마 유연성)
- 수평 확장이 쉬움 (여러 서버에 데이터 분산)
- 대용량 데이터 처리에 강함
- 빠른 읽기/쓰기 성능

---

## 2. NoSQL이 등장한 이유

### 문제 상황: 빅데이터 시대의 도래

**2000년대 후반, 인터넷 서비스가 급성장하면서**
```
- 페이스북: 하루 수억 건의 게시글
- 유튜브: 수백만 개의 동영상 업로드
- 트위터: 초당 수천 개의 트윗
```

→ 기존 RDBMS로는 감당하기 어려운 데이터 양!

### RDBMS의 한계

#### 1. 수직 확장의 한계
```
RDBMS는 주로 수직 확장 (Scale-Up):
서버 1대의 성능을 높이는 방식
- CPU 업그레이드
- RAM 증설
- 더 빠른 디스크

문제: 물리적 한계가 있고, 비용이 기하급수적으로 증가
```

#### 2. 스키마 변경의 어려움
```sql
-- 이미 수백만 개의 데이터가 있는 테이블에
-- 새로운 열을 추가하려면?
ALTER TABLE users ADD COLUMN profile_image VARCHAR(255);

→ 시간이 오래 걸리고, 서비스 중단 가능성
```

#### 3. 관계 조인의 성능 문제
```sql
-- 여러 테이블을 조인하면 성능 저하
SELECT u.name, o.product, o.price
FROM users u
JOIN orders o ON u.id = o.user_id
JOIN products p ON o.product_id = p.id
WHERE u.country = 'Korea';

→ 데이터가 많아질수록 느려짐
```

### NoSQL의 해결책

✅ **수평 확장 (Scale-Out)**: 서버를 여러 대 추가하여 부하 분산
✅ **유연한 스키마**: 구조 변경이 쉽고 빠름
✅ **단순한 데이터 모델**: 조인 없이 빠른 조회

---

## 3. RDBMS vs NoSQL 비교

| 구분 | RDBMS | NoSQL |
|------|-------|-------|
| **데이터 모델** | 테이블 (행, 열) | 문서, Key-Value, 그래프 등 |
| **스키마** | 고정 스키마 (사전 정의 필수) | 유연한 스키마 (자유로운 변경) |
| **확장 방식** | 수직 확장 (Scale-Up) | 수평 확장 (Scale-Out) |
| **트랜잭션** | ACID 완벽 보장 | BASE (최종 일관성) |
| **관계** | 외래키로 관계 설정 | 관계 없음 또는 내장 |
| **사용 사례** | 금융, 회계, ERP | 실시간 분석, SNS, IoT |
| **장점** | 데이터 무결성, 일관성 | 빠른 속도, 유연성 |
| **단점** | 확장 어려움, 스키마 변경 어려움 | 복잡한 쿼리 어려움 |

### ACID vs BASE

#### ACID (RDBMS)
- **A**tomicity (원자성): 전부 성공 또는 전부 실패
- **C**onsistency (일관성): 항상 일관된 상태 유지
- **I**solation (독립성): 동시 실행되어도 영향 없음
- **D**urability (지속성): 완료된 트랜잭션은 영구 저장

#### BASE (NoSQL)
- **B**asically **A**vailable (기본적 가용성): 대부분의 시간에 사용 가능
- **S**oft state (유연한 상태): 시간이 지나면서 상태 변경 가능
- **E**ventual consistency (최종 일관성): 언젠가는 일관된 상태가 됨

**예시**
```
RDBMS (ACID):
계좌 이체 시 출금과 입금이 동시에 완료되어야 함
→ 중간에 실패하면 전체 롤백

NoSQL (BASE):
SNS 좋아요 수가 즉시 정확하지 않아도 괜찮음
→ 몇 초 후에 정확한 수로 업데이트
```

---

## 4. NoSQL의 주요 유형

### 1. 문서형 (Document Store)
데이터를 **JSON 형태의 문서**로 저장합니다.

**대표적인 DBMS**: MongoDB, Couchbase

**구조**
```json
{
  "_id": "user001",
  "name": "홍길동",
  "age": 20,
  "email": "hong@email.com",
  "interests": ["프로그래밍", "게임", "음악"],
  "address": {
    "city": "서울",
    "district": "강남구"
  }
}
```

**특징**
- 스키마 없이 자유로운 구조
- 배열, 중첩 객체 저장 가능
- 각 문서마다 다른 필드를 가질 수 있음

**사용 사례**
- 사용자 프로필
- 콘텐츠 관리 시스템 (CMS)
- 전자상거래 상품 정보

### 2. Key-Value 형
데이터를 **키와 값의 쌍**으로 저장합니다. 가장 단순하고 빠릅니다.

**대표적인 DBMS**: Redis, Memcached, DynamoDB

**구조**
```
키: "user:1001:session"
값: "a1b2c3d4e5f6..."

키: "cart:user001"
값: ["상품1", "상품2", "상품3"]
```

**특징**
- 매우 빠른 읽기/쓰기
- 단순한 구조
- 복잡한 쿼리 불가능

**사용 사례**
- 세션 저장
- 캐시 (Cache)
- 실시간 순위표

### 3. 열 지향형 (Column-Family Store)
데이터를 **열 단위**로 저장합니다.

**대표적인 DBMS**: Cassandra, HBase

**구조**
```
Row Key: user001
  Column Family: profile
    - name: "홍길동"
    - age: 20
  Column Family: activity
    - last_login: "2024-01-20"
    - login_count: 42
```

**특징**
- 대용량 데이터 처리에 강함
- 분산 저장에 최적화
- 특정 열만 빠르게 조회 가능

**사용 사례**
- 로그 데이터 분석
- 대용량 시계열 데이터
- IoT 센서 데이터

### 4. 그래프형 (Graph Database)
데이터를 **노드와 관계(엣지)**로 표현합니다.

**대표적인 DBMS**: Neo4j, ArangoDB

**구조**
```
노드: [홍길동] --친구--> [김영희]
            |
            └--좋아요--> [게시글1]

노드: [김영희] --작성--> [게시글1]
```

**특징**
- 복잡한 관계 표현에 강함
- 관계 기반 쿼리 빠름
- SNS, 추천 시스템에 적합

**사용 사례**
- 소셜 네트워크
- 추천 시스템
- 지식 그래프

---

## 5. 언제 NoSQL을 사용해야 할까?

### NoSQL을 사용하면 좋은 경우

✅ **대용량 데이터 처리**
```
- 하루 수백만 건의 로그 데이터
- 실시간 센서 데이터
- SNS 게시글, 댓글
```

✅ **빠른 읽기/쓰기가 필요한 경우**
```
- 실시간 채팅
- 게임 순위표
- 실시간 분석
```

✅ **스키마가 자주 변경되는 경우**
```
- 프로토타입 개발
- 스타트업 초기 단계
- 다양한 형태의 데이터
```

✅ **수평 확장이 필요한 경우**
```
- 트래픽 급증 대비
- 글로벌 서비스
```

### RDBMS를 사용해야 하는 경우

✅ **데이터 무결성이 중요한 경우**
```
- 금융 거래
- 회계 시스템
- 재고 관리
```

✅ **복잡한 관계가 많은 경우**
```
- ERP 시스템
- 학사 관리 시스템
- 주문-배송-결제 시스템
```

✅ **복잡한 쿼리가 필요한 경우**
```
- 통계 리포트
- 다양한 조건의 검색
- 집계 분석
```

---

## 6. 실제 사례로 이해하기

### 사례 1: 전자상거래 쇼핑몰

**RDBMS 사용 영역**
```sql
-- 주문, 결제, 재고 (정확성 중요)
orders 테이블
payments 테이블
inventory 테이블
```

**NoSQL 사용 영역**
```json
// 상품 정보 (스키마 유연성)
{
  "product_id": "p001",
  "name": "노트북",
  "specs": {
    "cpu": "Intel i7",
    "ram": "16GB"
  },
  "reviews": [...]  // 리뷰 개수 제한 없음
}

// 장바구니 (빠른 읽기/쓰기)
Redis: "cart:user001" → ["p001", "p002"]
```

### 사례 2: SNS 플랫폼

**RDBMS 사용 영역**
```sql
-- 사용자 인증, 결제
users 테이블
subscriptions 테이블
```

**NoSQL 사용 영역**
```json
// 게시글 (대용량, 다양한 형식)
MongoDB:
{
  "post_id": "post001",
  "author": "user001",
  "content": "안녕하세요!",
  "media": ["image1.jpg", "video1.mp4"],
  "tags": ["일상", "여행"]
}

// 타임라인 캐시 (빠른 조회)
Redis: "timeline:user001" → [post001, post002, ...]
```

---

## 7. MongoDB 맛보기

본 강의에서는 NoSQL의 대표격인 **MongoDB**를 간단히 다룹니다.

### MongoDB 기본 개념

| RDBMS | MongoDB |
|-------|---------|
| Database | Database |
| Table | Collection |
| Row | Document |
| Column | Field |

### 간단한 MongoDB 명령어

```javascript
// 데이터 삽입
db.students.insertOne({
  name: "홍길동",
  age: 20,
  major: "컴퓨터공학"
});

// 데이터 조회
db.students.find({ age: { $gte: 20 } });

// 데이터 수정
db.students.updateOne(
  { name: "홍길동" },
  { $set: { age: 21 } }
);

// 데이터 삭제
db.students.deleteOne({ name: "홍길동" });
```

---

## 8. 강사 가이드

### 수업 진행 팁

1. **NoSQL의 필요성 공감대 형성**
   - YouTube, Instagram 같은 대규모 서비스 예시
   - "하루 수억 건의 데이터를 RDBMS로 처리한다면?" 질문

2. **RDBMS를 부정하지 않기**
   - NoSQL이 RDBMS를 대체하는 것이 아님
   - 각자 장단점이 있고, 상황에 맞게 선택
   - 실무에서는 두 가지를 함께 사용하는 경우가 많음

3. **유형별 특징 비교**
   - 문서형: "JSON처럼 자유로운 구조"
   - Key-Value: "사전(Dictionary)처럼 단순"
   - 그래프: "SNS 친구 관계처럼 연결"

4. **실제 서비스 예시**
   - Netflix: Cassandra (시청 기록)
   - Twitter: Redis (타임라인 캐시)
   - LinkedIn: Neo4j (인맥 관계)

### 실습 아이디어

**실습 1: RDBMS vs NoSQL 선택하기**
```
시나리오:
1. 은행 계좌 이체 시스템 → ?
2. 실시간 채팅 애플리케이션 → ?
3. 학생 성적 관리 시스템 → ?
4. IoT 센서 데이터 수집 → ?

답: 1. RDBMS, 2. NoSQL, 3. RDBMS, 4. NoSQL
```

**실습 2: MongoDB 간단 실습**
```
MongoDB Atlas (클라우드)나 로컬 MongoDB로
간단한 CRUD 작업 실습
```

### 질문 예상

**Q: NoSQL이 더 좋은 거 아닌가요?**
A: 아닙니다. 상황에 따라 다릅니다. 데이터 무결성이 중요하면 RDBMS, 빠른 속도와 확장성이 중요하면 NoSQL.

**Q: 하나만 써야 하나요?**
A: 아닙니다. 실무에서는 RDBMS와 NoSQL을 함께 사용하는 경우가 많습니다. 예: 주문은 MySQL, 세션은 Redis.

**Q: MongoDB가 가장 좋은 NoSQL인가요?**
A: 가장 "유명한" NoSQL이지만 "가장 좋은"은 아닙니다. 상황에 따라 Redis, Cassandra가 더 적합할 수 있습니다.

**Q: SQL을 배웠는데 NoSQL도 배워야 하나요?**
A: SQL이 더 중요합니다. NoSQL은 필요할 때 학습하면 됩니다. 이번 수업에서는 개념만 이해하세요.

---

## 다음 섹션 안내

다음 시간에는 **개발 환경 설정**을 진행합니다.
- MySQL 설치 및 설정
- MySQL Workbench 사용법
- 첫 데이터베이스 생성
- 첫 테이블 생성
