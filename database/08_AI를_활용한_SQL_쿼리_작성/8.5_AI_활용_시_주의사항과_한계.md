# 8.5 AI 활용 시 주의사항과 한계

> **학습 목표**
> - AI의 한계를 이해하고 적절히 활용할 수 있습니다
> - 실무에서 AI를 안전하게 사용하는 방법을 배웁니다
> - AI에 과도하게 의존하지 않는 균형잡힌 학습 전략을 수립합니다

---

## 1. AI의 주요 한계

### 1.1 데이터베이스 구조를 정확히 모름

**문제 상황**:
```
사용자: "고객 정보를 조회해줘"

AI: SELECT * FROM users;  -- ❌ 틀림!
```

**왜 틀릴까?**:
- AI는 여러분의 데이터베이스 테이블명을 모름
- `users`, `customer`, `clients` 등 다양한 이름 가능
- 추측으로 답변할 수밖에 없음

**해결책**:
```
사용자: "sakila 데이터베이스의 customer 테이블에서 정보를 조회해줘"

AI: SELECT * FROM customer;  -- ✅ 정확!
```

---

### 1.2 최신 기능을 모를 수 있음

**AI 지식의 시점**:
- ChatGPT 3.5: 2021년 9월까지
- ChatGPT 4: 2023년 4월까지
- Claude 2: 2023년 초까지

**문제 예시**:
```
사용자: "MySQL 8.4의 새로운 JSON 기능을 사용해서 쿼리를 작성해줘"

AI: "저는 MySQL 8.4의 새로운 기능을 정확히 알지 못합니다.
     MySQL 8.0 기준으로 답변해도 될까요?"
```

---

### 1.3 때로는 틀린 답변 제공

#### 예시 1: 논리 오류

**사용자**:
```
"대여료가 2.99보다 크고 4.99보다 작은 영화를 조회해줘"
```

**AI (잘못된 응답)**:
```sql
SELECT * FROM film
WHERE rental_rate > 2.99 OR rental_rate < 4.99;  -- ❌ OR은 틀림!
```

**올바른 쿼리**:
```sql
SELECT * FROM film
WHERE rental_rate > 2.99 AND rental_rate < 4.99;  -- ✅ AND 사용
```

---

#### 예시 2: 문법 오류

**AI가 가끔 생성하는 잘못된 쿼리**:
```sql
-- ❌ MySQL에서는 FULL OUTER JOIN 미지원
SELECT *
FROM film f
FULL OUTER JOIN inventory i ON f.film_id = i.film_id;
```

**올바른 방법 (MySQL)**:
```sql
-- ✅ LEFT JOIN과 RIGHT JOIN을 UNION
SELECT *
FROM film f
LEFT JOIN inventory i ON f.film_id = i.film_id
UNION
SELECT *
FROM film f
RIGHT JOIN inventory i ON f.film_id = i.film_id;
```

---

### 1.4 보안 취약점 간과

**AI가 생성한 위험한 코드**:
```python
# ❌ SQL Injection 위험!
user_input = request.GET['username']
query = f"SELECT * FROM customer WHERE username = '{user_input}'"
cursor.execute(query)
```

**공격 시나리오**:
```
user_input = "admin' OR '1'='1"

실제 쿼리:
SELECT * FROM customer WHERE username = 'admin' OR '1'='1'
→ 모든 고객 데이터 유출!
```

**안전한 방법**:
```python
# ✅ 파라미터 바인딩
query = "SELECT * FROM customer WHERE username = %s"
cursor.execute(query, (user_input,))
```

---

## 2. 실무에서의 주의사항

### 2.1 프로덕션 환경에서 주의

#### ❌ 하지 말아야 할 것

**1. AI 쿼리를 검증 없이 프로덕션에 바로 적용**:
```sql
-- AI가 생성한 쿼리 (위험!)
DELETE FROM customer;  -- WHERE절 없음!
```

**2. 민감한 데이터를 AI에 노출**:
```
-- ❌ 실제 고객 데이터를 AI에 공유
사용자: "다음 고객 데이터를 분석해줘:
         홍길동, 주민번호 123456-1234567, ..."
```

**3. AI 생성 쿼리를 그대로 문서화**:
- 주석이나 설명 없이 그대로 사용
- 다른 개발자가 이해하기 어려움

---

#### ✅ 해야 할 것

**1. 항상 테스트 환경에서 먼저 실행**:
```sql
-- 1. 개발 DB에서 테스트
USE sakila_dev;
SELECT * FROM customer LIMIT 10;

-- 2. 검증 완료 후 프로덕션 적용
USE sakila_prod;
SELECT * FROM customer LIMIT 10;
```

**2. 민감한 정보 제거**:
```
-- ✅ 샘플 데이터로 대체
사용자: "다음과 같은 구조의 customer 테이블에서...
         (customer_id, first_name, last_name, email)"
```

**3. 주석과 설명 추가**:
```sql
-- AI가 생성한 쿼리에 주석 추가
-- 목적: 2005년 6월 VIP 고객 조회
-- 작성일: 2025-01-10
-- 작성자: 홍길동
SELECT c.customer_id, COUNT(*) as rental_count
FROM customer c
JOIN rental r ON c.customer_id = r.customer_id
WHERE r.rental_date >= '2005-06-01'
  AND r.rental_date < '2005-07-01'
GROUP BY c.customer_id
HAVING rental_count >= 10;
```

---

### 2.2 성능 문제

#### AI가 놓치는 성능 이슈

**1. 인덱스 미활용**:
```sql
-- AI 생성 쿼리
SELECT * FROM rental
WHERE DATE(rental_date) = '2005-06-15';  -- DATE() 함수로 인덱스 미활용
```

**2. 불필요한 정렬**:
```sql
-- AI 생성 쿼리
SELECT * FROM film
ORDER BY film_id;  -- 불필요한 정렬 (순서가 중요하지 않은 경우)
```

**3. SELECT * 남용**:
```sql
-- AI 생성 쿼리
SELECT * FROM film;  -- 100개 컬럼 중 3개만 필요한데 전부 조회
```

---

### 2.3 유지보수 문제

**AI만 의존하면 발생하는 문제**:

1. **코드 이해도 부족**:
   - AI가 생성한 복잡한 쿼리를 이해 못함
   - 나중에 수정이 필요할 때 막막함

2. **디버깅 능력 부족**:
   - 에러가 발생해도 원인 파악 어려움
   - 다시 AI에게 물어봐야 하는 악순환

3. **최적화 불가**:
   - 성능 문제 발견해도 개선 방법 모름

---

## 3. 올바른 AI 활용 전략

### 3.1 학습 단계별 AI 활용도

#### 초급 (SQL 배우는 중)

**AI 활용: 30%**
```
✅ 문법 확인용
✅ 에러 메시지 해석
✅ 예제 코드 생성

❌ 과제 전부를 AI에게 맡김
❌ 이해 없이 복사만 함
```

**학습 방법**:
1. 먼저 직접 작성 시도
2. 막히면 AI에게 힌트 요청
3. AI 답변을 보고 이해한 후 직접 작성

---

#### 중급 (SQL 기초 완료)

**AI 활용: 50%**
```
✅ 복잡한 쿼리 구조 설계 도움
✅ 최적화 아이디어 얻기
✅ 다양한 접근 방법 비교

❌ 모든 쿼리를 AI가 작성
```

**학습 방법**:
1. 기본 구조는 직접 작성
2. 최적화나 고급 기능은 AI와 협업
3. AI 제안을 이해하고 응용

---

#### 고급 (실무 활용)

**AI 활용: 70%**
```
✅ 빠른 프로토타이핑
✅ 복잡한 비즈니스 로직 구현
✅ 코드 리뷰 및 최적화

✅ 직접 검증 및 수정 가능
```

---

### 3.2 AI와 함께 성장하는 방법

#### 1. 항상 "왜?"라고 물어보기

```
사용자: "이 쿼리가 왜 이렇게 작성되었는지 설명해줘"

AI: "GROUP BY를 사용한 이유는..."
```

#### 2. 직접 수정해보기

```
사용자: "이 쿼리를 다르게 작성할 수 있는 방법이 있을까?"

AI: "서브쿼리 대신 JOIN을 사용할 수 있습니다..."
```

#### 3. 대안 찾아보기

```
사용자: "같은 결과를 얻는 다른 쿼리를 3가지 보여줘"

AI: [3가지 다른 접근 방법 제시]
```

---

## 4. AI 사용 체크리스트

### 쿼리 작성 전

- [ ] 먼저 직접 작성 시도했는가?
- [ ] AI에게 명확하게 요청할 준비가 되었는가?
- [ ] 테이블 구조를 AI에게 알려줄 준비가 되었는가?

### 쿼리 생성 후

- [ ] AI 쿼리를 이해했는가?
- [ ] 테스트 환경에서 실행했는가?
- [ ] 결과가 예상과 일치하는가?
- [ ] 성능 문제는 없는가?
- [ ] 보안 취약점은 없는가?

### 프로덕션 적용 전

- [ ] 충분한 테스트를 거쳤는가?
- [ ] 주석을 추가했는가?
- [ ] 팀원들이 이해할 수 있는 코드인가?
- [ ] 문서화했는가?

---

## 5. 실무 시나리오: AI 실수 사례

### 사례 1: 데이터 유실 위험

**요청**:
```
"고객 테이블에서 중복된 이메일을 삭제해줘"
```

**AI 응답 (위험!)**:
```sql
DELETE FROM customer
WHERE email IN (
    SELECT email
    FROM customer
    GROUP BY email
    HAVING COUNT(*) > 1
);  -- ❌ 중복된 것 전부 삭제! (하나만 남겨야 하는데)
```

**올바른 방법**:
```sql
-- 1. 백업 먼저
CREATE TABLE customer_backup AS SELECT * FROM customer;

-- 2. 중복 제거 (최신 것만 남기기)
DELETE c1 FROM customer c1
INNER JOIN customer c2
WHERE c1.email = c2.email
  AND c1.customer_id < c2.customer_id;
```

---

### 사례 2: 성능 문제

**요청**:
```
"모든 고객의 대여 이력을 조회해줘"
```

**AI 응답 (느림)**:
```sql
SELECT c.*,
       (SELECT COUNT(*) FROM rental WHERE customer_id = c.customer_id) as cnt
FROM customer c;  -- 서브쿼리가 고객 수만큼 실행
```

**개선안**:
```sql
-- JOIN 사용
SELECT c.customer_id, c.first_name, c.last_name, COUNT(r.rental_id) as cnt
FROM customer c
LEFT JOIN rental r ON c.customer_id = r.customer_id
GROUP BY c.customer_id, c.first_name, c.last_name;
```

---

## 6. 정리

### 핵심 요약

1. **AI의 한계 인식**
   - 데이터베이스 구조를 정확히 모름
   - 때로는 틀린 답변 제공
   - 보안 취약점 간과 가능

2. **실무 주의사항**
   - 항상 테스트 환경에서 먼저
   - 민감한 정보 노출 금지
   - 프로덕션 적용 전 철저한 검증

3. **올바른 활용 전략**
   - 학습 단계에 맞는 활용도 조절
   - 항상 이해하고 사용
   - AI와 함께 성장

4. **체크리스트 활용**
   - 작성 전/후, 적용 전 단계별 확인

### 다음 단계

다음 섹션에서는 **실습: AI와 함께 쿼리 작성하기**를 진행합니다!

---

## 강사 가이드

### 강의 진행 팁

**1. 실제 실수 경험**
- AI의 틀린 답변 사례 직접 보여주기
- 학생들이 직접 실수를 경험하도록

**2. 균형 잡힌 시각 강조**
- AI는 도구일 뿐
- 기초 학습의 중요성 반복 강조

**3. 실무 사례 공유**
- 실제 프로젝트에서의 AI 활용 사례
- 문제 발생 시 대처 방법

### 예상 질문과 답변

**Q: AI를 사용하면 SQL을 제대로 배울 수 없나요?**
A: 아닙니다. 기초를 먼저 배운 후 AI를 보조 도구로 활용하면 오히려 더 빨리 성장할 수 있습니다.

**Q: 회사에서 AI 사용을 금지하면 어떡하나요?**
A: 개인 학습용으로만 사용하고, 회사 데이터나 코드는 절대 AI에 공유하지 마세요.

---

**[이전: 8.4 복잡한 쿼리를 AI와 함께 작성하기](./8.4_복잡한_쿼리를_AI와_함께_작성하기.md)** | **[다음: 8.6 실습: AI와 함께 쿼리 작성하기](./8.6_실습_AI와_함께_쿼리_작성하기.md)**
