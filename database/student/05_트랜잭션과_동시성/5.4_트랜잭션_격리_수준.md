# 5.4. 트랜잭션 격리 수준(Isolation Level) 핵심 요약

### 1. 격리 수준 기본 개념

- **격리 수준 (Isolation Level)**
  - 여러 트랜잭션이 동시에 실행될 때, 서로 얼마나 격리되어 있는지를 나타내는 정도.
  - **동시성(성능)과 데이터 일관성(정확성) 사이의 트레이드오프(Trade-off)** 관계를 가짐.
    - **높은 격리 수준**: 데이터 일관성은 높지만, 동시 처리 성능은 낮아짐.
    - **낮은 격리 수준**: 동시 처리 성능은 높지만, 데이터 일관성에 문제가 발생할 수 있음.

---

### 2. 격리 수준에 따라 발생하는 문제점

- **Dirty Read**
  - 한 트랜잭션이 **커밋(Commit)되지 않은** 다른 트랜잭션의 변경사항을 읽는 현상.

- **Non-Repeatable Read (반복 불가능 읽기)**
  - 한 트랜잭션 내에서 같은 데이터를 두 번 조회했을 때, 그 사이에 다른 트랜잭션이 값을 수정하고 커밋하여 **결과가 다르게** 나오는 현상.

- **Phantom Read (유령 읽기)**
  - 한 트랜잭션 내에서 같은 쿼리를 두 번 실행했을 때, 첫 번째 쿼리에는 없던 **새로운 행(Row)**이 두 번째 쿼리에서 나타나는 현상.

---

### 3. 4가지 표준 격리 수준 (낮은 순 → 높은 순)

| 격리 수준 | Dirty Read | Non-Repeatable Read | Phantom Read | 특징 |
| :--- | :--- | :--- | :--- | :--- |
| **`READ UNCOMMITTED`** | **발생** | **발생** | **발생** | 커밋되지 않은 데이터도 읽음. 거의 사용 안 함. |
| **`READ COMMITTED`** | 방지 | **발생** | **발생** | 커밋된 데이터만 읽음. 대부분의 DBMS 기본값. |
| **`REPEATABLE READ`** | 방지 | 방지 | **발생*** | 트랜잭션 내내 같은 스냅샷을 읽음. **MySQL 기본값**. |
| **`SERIALIZABLE`** | 방지 | 방지 | 방지 | 트랜잭션을 순서대로 실행. 동시성이 가장 낮음. |

- `*` MySQL의 InnoDB 엔진은 `REPEATABLE READ` 수준에서도 갭 락(Gap Lock)을 사용하여 대부분의 `Phantom Read`를 방지함.

---

### 4. 격리 수준 확인 및 변경

- **현재 격리 수준 확인**
  ```sql
  SELECT @@transaction_isolation;
  ```

- **격리 수준 변경 (현재 세션에만 적용)**
  ```sql
  SET SESSION TRANSACTION ISOLATION LEVEL [격리수준명];
  -- 예: SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;
  ```
