# 2.4. BCNF와 역정규화 핵심 요약

### 1. BCNF (Boyce-Codd Normal Form)

- **BCNF 정의**
  - 3NF보다 더 강화된 정규형.
  - 테이블의 **모든 결정자가 후보키(Candidate Key)**여야 한다는 규칙을 가짐.

- **결정자 (Determinant)**
  - 다른 열의 값을 유일하게 결정할 수 있는 열(또는 열의 집합).
  - `A → B` 관계에서 `A`가 결정자.

- **3NF와의 관계**
  - 대부분의 경우, 3NF를 만족하면 BCNF도 만족함.
  - 여러 개의 복합 후보키가 서로 겹치는 특수한 경우에만 3NF와 BCNF의 차이가 발생할 수 있음.
  - 실무에서는 일반적으로 3NF까지만 정규화를 진행해도 충분함.

---

### 2. 역정규화 (Denormalization)

- **역정규화 정의**
  - 조회 성능을 향상시키기 위해, 의도적으로 정규화 규칙을 위반하여 테이블에 데이터 중복을 허용하는 과정.

- **목적**
  - 과도한 `JOIN`으로 인한 성능 저하를 막기 위함.

- **고려 시점**
  - 정규화를 모두 마친 후, 시스템 테스트 과정에서 `JOIN`으로 인한 속도 저하가 실제로 발생했을 때.
  - **주의**: 설계 단계에서 미리 역정규화를 적용하는 것은 좋지 않음.

- **역정규화의 단점**
  - 데이터 중복으로 인한 저장 공간 낭비.
  - 데이터 수정 시, 중복된 모든 데이터를 함께 수정해야 하므로 데이터 불일치가 발생할 가능성이 높아짐 (무결성 저해).

---

### 3. 주요 역정규화 기법

- **테이블 통합**
  - 1:1 또는 1:N 관계의 테이블을 하나의 테이블로 합쳐 `JOIN` 연산을 줄임.

- **파생 열 추가**
  - 다른 열의 값으로 계산해서 얻을 수 있는 값을 미리 계산하여 열로 추가.
  - 예: 주문상세들의 합계인 `총주문금액`을 주문 테이블에 추가.

- **중복 열 추가**
  - `JOIN`이 자주 발생하는 다른 테이블의 열을 현재 테이블에 미리 추가.
  - 예: `게시글` 테이블에 `작성자이름` 열을 추가하여 `회원` 테이블과의 `JOIN`을 피함.

- **집계 데이터 미리 계산**
  - `COUNT(*)`, `SUM()` 등 집계 함수의 결과를 미리 계산하여 별도의 열이나 테이블에 저장.
  - 예: `회원` 테이블에 `게시글수` 열을 추가하고, 게시글이 작성될 때마다 카운트를 업데이트.
