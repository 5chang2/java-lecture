# 3.9. 실습: SQL 기초 종합 프로젝트

### 1. 프로젝트 목표

- "온라인 상점" 시나리오에 맞춰 데이터베이스와 테이블을 직접 생성한다.
- `INSERT`, `UPDATE`, `DELETE`를 사용하여 데이터를 관리한다.
- `SELECT`, `WHERE`, `ORDER BY`, `LIMIT`, `GROUP BY`, `HAVING`, `CASE` 등 배운 모든 SQL 기초 문법을 종합적으로 사용하여 데이터를 분석하고 조회하는 실전 훈련을 한다.

---

### 2. 1단계: 환경 준비

- **데이터베이스 생성 및 사용**
  ```sql
  CREATE DATABASE shop_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  USE shop_db;
  ```

- **`products` 테이블 생성**
  ```sql
  CREATE TABLE products (
      product_id    INT           PRIMARY KEY AUTO_INCREMENT,
      product_name  VARCHAR(100)  NOT NULL,
      category      VARCHAR(50)   NOT NULL,
      price         DECIMAL(10, 2) NOT NULL CHECK (price >= 0),
      stock         INT           DEFAULT 0 CHECK (stock >= 0),
      created_at    TIMESTAMP     DEFAULT CURRENT_TIMESTAMP
  );
  ```

- **샘플 데이터 삽입** (아래 쿼리를 복사하여 실행하세요)
  ```sql
  INSERT INTO products (product_name, category, price, stock) VALUES
  ('노트북', '전자제품', 1200000, 15),
  ('스마트폰', '전자제품', 800000, 25),
  ('태블릿', '전자제품', 600000, 20),
  ('티셔츠', '의류', 29000, 50),
  ('청바지', '의류', 59000, 30),
  ('운동화', '의류', 89000, 40),
  ('과자세트', '식품', 12000, 100),
  ('SQL 입문서', '도서', 35000, 20),
  ('데이터베이스 설계', '도서', 38000, 10),
  ('수건세트', '생활용품', 25000, 40);
  ```

---

### 3. 2단계: 실습 과제

- 아래 각 문제에 대한 SQL 쿼리를 직접 작성해보세요.

1.  **기본 조회**
    - 가격이 50만원 이상인 상품의 `product_name`과 `price`를 조회하시오.
    - '의류' 카테고리 상품 중, 재고(stock)가 35개 이하인 상품을 모두 조회하시오.

2.  **정렬 및 제한**
    - 재고가 많은 순서대로 상위 5개 상품의 `product_name`과 `stock`을 조회하시오.
    - '전자제품' 카테고리의 상품을 가격이 낮은 순으로 정렬하여 조회하시오.

3.  **데이터 조작**
    - `products` 테이블에 '무선 키보드' (전자제품, 45000원, 50개) 상품을 추가하시오.
    - '노트북'의 가격을 1150000원으로, 재고를 10개로 수정하시오.
    - '과자세트' 상품을 삭제하시오.

4.  **데이터 집계**
    - 각 카테고리(`category`)별로 상품 수, 평균 가격, 총 재고 수를 조회하시오.
    - 위 결과에서, 평균 가격이 10만원 이상인 카테고리만 필터링하여 조회하시오.

5.  **`CASE` 문 활용**
    - `CASE` 문을 사용하여, 각 상품의 재고 상태를 다음과 같이 분류하여 `product_name`, `stock`, `재고상태` 컬럼을 조회하시오.
      - 100개 이상: '재고 많음'
      - 30개 이상 100개 미만: '보통'
      - 30개 미만: '재고 부족'
