# 3.7. GROUP BY와 HAVING 핵심 요약

### 1. `GROUP BY` (데이터 그룹화)

- **설명**: 특정 열(Column)의 값이 같은 행(Row)들을 하나의 그룹으로 묶어, 그룹별로 집계 함수(`COUNT`, `SUM`, `AVG` 등)를 적용하기 위해 사용.
- **구문**: `GROUP BY 그룹화할_컬럼명1, 그룹화할_컬럼명2, ...;`
- **규칙**: `SELECT` 절에는 `GROUP BY`에 사용된 컬럼과 집계 함수만 사용할 수 있다.

- **예시: 대륙별 국가 수 계산**
  ```sql
  SELECT Continent, COUNT(*) AS country_count
  FROM country
  GROUP BY Continent;
  ```

---

### 2. `HAVING` (그룹 필터링)

- **설명**: `GROUP BY`로 그룹화된 결과에 대해 조건을 적용하여, 특정 그룹만 필터링.
- **구문**: `HAVING [그룹에 대한 조건];`
- **특징**: 조건문에 `COUNT`, `SUM` 등 집계 함수를 사용할 수 있다.

- **예시: 국가 수가 10개 이상인 대륙만 조회**
  ```sql
  SELECT Continent, COUNT(*)
  FROM country
  GROUP BY Continent
  HAVING COUNT(*) >= 10;
  ```

---

### 3. `WHERE` vs `HAVING`

| 구분 | `WHERE` | `HAVING` |
| :--- | :--- | :--- |
| **역할** | 개별 행(Row) 필터링 | 그룹화된 결과 필터링 |
| **실행 시점** | 그룹화(`GROUP BY`) **전** | 그룹화(`GROUP BY`) **후** |
| **집계 함수 사용** | **불가** | **가능** |

- **예시: 아시아 대륙에서, 국가 수가 5개 이상인 지역만 조회**
  ```sql
  SELECT Region, COUNT(*)
  FROM country
  WHERE Continent = 'Asia'  -- (1) 먼저 아시아 국가만 필터링
  GROUP BY Region           -- (2) 지역별로 그룹화
  HAVING COUNT(*) >= 5;     -- (3) 그룹 중 국가 수가 5개 이상인 그룹만 필터링
  ```

---

### 4. SQL 실행 순서 (전체)

1.  **`FROM`**: 테이블 선택
2.  **`WHERE`**: 행 필터링
3.  **`GROUP BY`**: 그룹화
4.  **`HAVING`**: 그룹 필터링
5.  **`SELECT`**: 조회할 컬럼/집계 선택
6.  **`ORDER BY`**: 결과 정렬
7.  **`LIMIT`**: 최종 결과 개수 제한
