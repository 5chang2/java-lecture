# 4.3. 인덱스(Index) 핵심 요약

### 1. 인덱스(Index) 기본 개념

- **인덱스(Index)**
  - 데이터베이스 테이블의 **검색(SELECT) 속도**를 향상시키기 위한 자료구조.
  - 책의 맨 뒤에 있는 '찾아보기(색인)'와 같이, 데이터의 위치를 빠르게 찾을 수 있도록 도와줌.

- **동작 원리**
  - 데이터를 미리 특정 순서로 정렬하여 별도의 공간에 저장해 둠.
  - 검색 시 테이블 전체를 다 읽지 않고(Full Table Scan), 인덱스를 통해 원하는 데이터의 위치로 바로 찾아감.

---

### 2. 인덱스의 장점과 단점

- **장점**
  - `SELECT` 쿼리의 성능을 극적으로 향상시킴.
  - `WHERE` 절, `JOIN` 연산, `ORDER BY` 절의 성능을 개선함.

- **단점**
  - 인덱스를 저장하기 위한 추가적인 디스크 공간이 필요함 (테이블 크기의 약 10% 내외).
  - `INSERT`, `UPDATE`, `DELETE` 작업 시 인덱스도 함께 수정해야 하므로, 데이터 **변경 작업의 성능이 저하**됨.

---

### 3. 인덱스 관리 명령어

- **생성**: `CREATE INDEX 인덱스명 ON 테이블명 (컬럼명1, 컬럼명2, ...);`
- **조회**: `SHOW INDEX FROM 테이블명;`
- **삭제**: `DROP INDEX 인덱스명 ON 테이블명;`

---

### 4. `EXPLAIN` (실행 계획 확인)

- **설명**: SQL 쿼리가 어떻게 실행될 것인지(인덱스를 사용하는지, 몇 개의 행을 검사하는지 등)를 보여주는 명령어. 쿼리 튜닝의 필수 도구.
- **사용법**: `EXPLAIN SELECT ...;`
- **주요 확인 항목**:
  - `type`: `ALL`(전체 스캔, 최악)인지, `ref` 또는 `range`(인덱스 사용, 양호)인지 확인하는 것이 가장 중요.
  - `key`: 쿼리 실행에 실제로 사용된 인덱스의 이름.
  - `rows`: 쿼리를 처리하기 위해 검사할 것으로 예상되는 행의 수. (이 값이 작을수록 좋음)

---

### 5. 인덱스 생성 전략

- **인덱스를 생성하면 좋은 컬럼**
  - `WHERE` 절에 자주 사용되는 컬럼.
  - `JOIN`의 연결 조건(ON 절)에 사용되는 컬럼.
  - `ORDER BY` 절에 자주 사용되는 컬럼.
  - 데이터의 중복도가 낮은(고유한 값의 비율이 높은) 컬럼. (예: `이메일`, `주민번호` O / `성별` X)

- **인덱스 생성을 피해야 하는 경우**
  - 데이터 변경(`INSERT`, `UPDATE`, `DELETE`)이 매우 빈번한 테이블.
  - 데이터의 양이 매우 적은 테이블 (인덱스보다 전체를 읽는 것이 더 빠를 수 있음).
  - 중복도가 높은(고유한 값의 비율이 낮은) 컬럼.
