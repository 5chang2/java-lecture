# 6.3. MongoDB CRUD 작업 핵심 요약

- **CRUD**: 데이터베이스의 가장 기본적인 네 가지 작업인 **C**reate(생성), **R**ead(읽기), **U**pdate(수정), **D**elete(삭제)를 의미합니다.

---

### 1. Create (데이터 생성)

- **`db.collection.insertOne({ ... })`**: 하나의 문서(Document)를 삽입.
- **`db.collection.insertMany([ { ... }, { ... } ])`**: 여러 개의 문서를 동시에 삽입.

---

### 2. Read (데이터 조회)

- **`db.collection.find({ [조건] })`**: 조건에 맞는 모든 문서를 조회. 조건이 없으면 전체 조회.
- **`db.collection.findOne({ [조건] })`**: 조건에 맞는 첫 번째 문서 하나만 조회.

- **주요 쿼리 연산자** (조건문 `{}` 안에서 사용)
  - **비교**: `$eq`(같음), `$ne`(같지 않음), `$gt`(초과), `$gte`(이상), `$lt`(미만), `$lte`(이하)
    - 예: `{ age: { $gte: 20 } }` → 나이가 20 이상
  - **논리**: `$and`, `$or`, `$not`
    - 예: `{ $or: [ { age: { $lt: 20 } }, { status: "VIP" } ] }`
  - **배열**: `$in`(배열 안의 값 중 하나), `$nin`(배열에 없는 값)
    - 예: `{ status: { $in: ["A", "B"] } }`

- **프로젝션 (Projection)**: 조회할 필드를 선택.
  - `db.collection.find({ }, { name: 1, email: 1, _id: 0 })` → `name`, `email` 필드만 포함하고 `_id`는 제외.

- **커서(Cursor) 메소드**: `find()` 결과에 체이닝하여 사용.
  - `.sort({ 필드: 1 또는 -1 })`: 결과를 정렬 (1: 오름차순, -1: 내림차순).
  - `.limit(숫자)`: 결과 개수를 제한.
  - `.skip(숫자)`: 지정된 개수만큼 결과를 건너뜀 (페이징에 사용).

---

### 3. Update (데이터 수정)

- **`db.collection.updateOne({ [조건] }, { [업데이트 연산자] })`**: 조건에 맞는 첫 번째 문서 하나를 수정.
- **`db.collection.updateMany({ [조건] }, { [업데이트 연산자] })`**: 조건에 맞는 모든 문서를 수정.

- **주요 업데이트 연산자**
  - **`$set`**: 필드의 값을 수정하거나, 없는 필드일 경우 새로 추가.
  - **`$unset`**: 필드를 삭제.
  - **`$inc`**: 숫자 값을 지정한 만큼 증가시키거나 감소시킴. (예: `{ $inc: { stock: -1 } }`)
  - **`$push`**: 배열 필드에 요소를 추가.
  - **`$pull`**: 배열 필드에서 특정 조건의 요소를 제거.

- **`upsert` 옵션**: `{ upsert: true }`를 추가하면, 조건에 맞는 문서가 없을 경우 새로운 문서를 삽입.

---

### 4. Delete (데이터 삭제)

- **`db.collection.deleteOne({ [조건] })`**: 조건에 맞는 첫 번째 문서 하나를 삭제.
- **`db.collection.deleteMany({ [조건] })`**: 조건에 맞는 모든 문서를 삭제. `{}`를 비워두면 모든 문서를 삭제.
