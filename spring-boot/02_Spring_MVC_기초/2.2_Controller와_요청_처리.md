# 2.2 Controllerì™€ ìš”ì²­ ì²˜ë¦¬

> **í•™ìŠµ ëª©í‘œ**
> - @Controller ì• ë„ˆí…Œì´ì…˜ì˜ ì—­í• ì„ ì´í•´í•©ë‹ˆë‹¤
> - ë‹¤ì–‘í•œ HTTP ìš”ì²­ ë§¤í•‘ ë°©ë²•ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
> - ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ” ì—¬ëŸ¬ ë°©ë²•ì„ ì´í•´í•©ë‹ˆë‹¤
> - Modelì„ ì‚¬ìš©í•˜ì—¬ Viewì— ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
> - Redirectì™€ Forwardì˜ ì°¨ì´ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

---

## 1. Controller ê¸°ë³¸

### 1.1 @Controller ì• ë„ˆí…Œì´ì…˜

**ì—­í• **:
- ì´ í´ë˜ìŠ¤ê°€ **Controller** ì—­í• ì„ì„ Springì—ê²Œ ì•Œë¦¼
- **Component Scan** ëŒ€ìƒì´ ë¨ (ìë™ìœ¼ë¡œ Bean ë“±ë¡)
- **ìš”ì²­ì„ ì²˜ë¦¬**í•˜ëŠ” ë©”ì„œë“œë“¤ì„ í¬í•¨

**ê¸°ë³¸ êµ¬ì¡°**:
```java
package com.example.demo.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller  // â† Controller ì„ ì–¸
public class HomeController {

    @GetMapping("/")  // â† URL ë§¤í•‘
    public String home() {
        return "index";  // â† View ì´ë¦„ ë°˜í™˜
    }
}
```

### 1.2 Plain Java Servletê³¼ ë¹„êµ

**Plain Java (Servlet)**:
```java
@WebServlet("/home")
public class HomeServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request,
                         HttpServletResponse response)
            throws ServletException, IOException {

        // Viewë¡œ í¬ì›Œë”©
        RequestDispatcher dispatcher =
            request.getRequestDispatcher("/WEB-INF/views/index.jsp");
        dispatcher.forward(request, response);
    }
}
```

**Spring MVC**:
```java
@Controller
public class HomeController {

    @GetMapping("/home")
    public String home() {
        return "index";  // í›¨ì”¬ ê°„ê²°!
    }
}
```

---

## 2. HTTP ìš”ì²­ ë§¤í•‘

### 2.1 @GetMapping

**GET ìš”ì²­**ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```java
@Controller
public class ProductController {

    // URL: /products
    @GetMapping("/products")
    public String listProducts() {
        return "product/list";
    }

    // URL: /products/1
    @GetMapping("/products/{id}")
    public String getProduct(@PathVariable Long id) {
        return "product/detail";
    }
}
```

**ì‚¬ìš© ì‹œê¸°**:
- ë°ì´í„° ì¡°íšŒ
- í˜ì´ì§€ í‘œì‹œ
- ê²€ìƒ‰

### 2.2 @PostMapping

**POST ìš”ì²­**ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```java
@Controller
public class ProductController {

    // ìƒí’ˆ ë“±ë¡ í¼ (GET)
    @GetMapping("/products/new")
    public String newProductForm() {
        return "product/form";
    }

    // ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ (POST)
    @PostMapping("/products")
    public String createProduct(@RequestParam String name,
                                 @RequestParam int price) {
        // ìƒí’ˆ ì €ì¥ ë¡œì§
        return "redirect:/products";
    }
}
```

**ì‚¬ìš© ì‹œê¸°**:
- ë°ì´í„° ìƒì„±
- í¼ ì œì¶œ
- íŒŒì¼ ì—…ë¡œë“œ

### 2.3 ê¸°íƒ€ HTTP ë©”ì„œë“œ

```java
@Controller
@RequestMapping("/products")
public class ProductController {

    // GET /products (ëª©ë¡)
    @GetMapping
    public String list() {
        return "product/list";
    }

    // POST /products (ìƒì„±)
    @PostMapping
    public String create() {
        return "redirect:/products";
    }

    // PUT /products/1 (ìˆ˜ì • - ì „ì²´)
    @PutMapping("/{id}")
    public String update(@PathVariable Long id) {
        return "redirect:/products";
    }

    // PATCH /products/1 (ìˆ˜ì • - ì¼ë¶€)
    @PatchMapping("/{id}")
    public String partialUpdate(@PathVariable Long id) {
        return "redirect:/products";
    }

    // DELETE /products/1 (ì‚­ì œ)
    @DeleteMapping("/{id}")
    public String delete(@PathVariable Long id) {
        return "redirect:/products";
    }
}
```

| ë©”ì„œë“œ | ìš©ë„ | ë©±ë“±ì„± |
|--------|------|--------|
| GET | ì¡°íšŒ | O |
| POST | ìƒì„± | X |
| PUT | ì „ì²´ ìˆ˜ì • | O |
| PATCH | ì¼ë¶€ ìˆ˜ì • | X |
| DELETE | ì‚­ì œ | O |

### 2.4 @RequestMapping (í†µí•©)

ëª¨ë“  HTTP ë©”ì„œë“œë¥¼ í•˜ë‚˜ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@Controller
public class UserController {

    // ëª¨ë“  ë©”ì„œë“œ í—ˆìš©
    @RequestMapping("/users")
    public String users() {
        return "user/list";
    }

    // GET, POSTë§Œ í—ˆìš©
    @RequestMapping(value = "/users/new", method = {RequestMethod.GET, RequestMethod.POST})
    public String newUser() {
        return "user/form";
    }
}
```

**ê¶Œì¥**: ëª…ì‹œì ì¸ `@GetMapping`, `@PostMapping` ì‚¬ìš©

---

## 3. ìš”ì²­ íŒŒë¼ë¯¸í„° ë°›ê¸°

### 3.1 @RequestParam

**ì¿¼ë¦¬ ìŠ¤íŠ¸ë§** ë˜ëŠ” **í¼ ë°ì´í„°**ë¥¼ ë°›ìŠµë‹ˆë‹¤.

```java
@Controller
public class SearchController {

    // URL: /search?keyword=Spring&page=1
    @GetMapping("/search")
    public String search(@RequestParam String keyword,
                         @RequestParam int page,
                         Model model) {

        model.addAttribute("keyword", keyword);
        model.addAttribute("page", page);

        return "search/result";
    }
}
```

**Plain Javaì™€ ë¹„êµ**:
```java
// Servlet
String keyword = request.getParameter("keyword");
int page = Integer.parseInt(request.getParameter("page"));

// Spring MVC
@RequestParam String keyword,
@RequestParam int page
```

ìë™ìœ¼ë¡œ íƒ€ì… ë³€í™˜! âœ¨

### 3.2 @RequestParam ì˜µì…˜

**1. í•„ìˆ˜ ì—¬ë¶€**:
```java
@GetMapping("/search")
public String search(
    @RequestParam String keyword,              // í•„ìˆ˜ (ê¸°ë³¸ê°’)
    @RequestParam(required = false) String category  // ì„ íƒ
) {
    // categoryê°€ ì—†ìœ¼ë©´ null
}
```

**2. ê¸°ë³¸ê°’**:
```java
@GetMapping("/search")
public String search(
    @RequestParam String keyword,
    @RequestParam(defaultValue = "1") int page  // ê¸°ë³¸ê°’ 1
) {
    // page íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ 1
}
```

**3. ì´ë¦„ ë‹¤ë¥´ê²Œ**:
```java
@GetMapping("/search")
public String search(
    @RequestParam("q") String keyword  // URL: ?q=Spring
) {
    // íŒŒë¼ë¯¸í„° ì´ë¦„ì€ 'q', ë³€ìˆ˜ëª…ì€ keyword
}
```

### 3.3 @PathVariable

**URL ê²½ë¡œ**ì—ì„œ ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.

```java
@Controller
public class UserController {

    // URL: /users/123
    @GetMapping("/users/{id}")
    public String getUser(@PathVariable Long id, Model model) {
        model.addAttribute("userId", id);
        return "user/detail";
    }

    // URL: /posts/2024/05/10
    @GetMapping("/posts/{year}/{month}/{day}")
    public String getPostsByDate(
        @PathVariable int year,
        @PathVariable int month,
        @PathVariable int day,
        Model model
    ) {
        model.addAttribute("date", year + "-" + month + "-" + day);
        return "post/list";
    }
}
```

**RESTful URL ì„¤ê³„**:
```
/users/123          (O)  â† ê¹”ë”
/users?id=123       (â–³)  â† ì¿¼ë¦¬ ìŠ¤íŠ¸ë§
```

### 3.4 @RequestParam vs @PathVariable

| êµ¬ë¶„ | @RequestParam | @PathVariable |
|------|---------------|---------------|
| ìœ„ì¹˜ | ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ | URL ê²½ë¡œ |
| ì˜ˆì‹œ | `/search?q=Spring` | `/users/123` |
| ìš©ë„ | ê²€ìƒ‰, í•„í„°, í˜ì´ì§• | ë¦¬ì†ŒìŠ¤ ì‹ë³„ |
| í•„ìˆ˜ | ì„ íƒ ê°€ëŠ¥ | í•„ìˆ˜ (ê¸°ë³¸) |

**ì¡°í•© ì‚¬ìš©**:
```java
// URL: /users/123?include=posts
@GetMapping("/users/{id}")
public String getUser(
    @PathVariable Long id,
    @RequestParam(required = false) String include
) {
    // idëŠ” ê²½ë¡œì—ì„œ, includeëŠ” ì¿¼ë¦¬ì—ì„œ
}
```

### 3.5 ê°ì²´ë¡œ í•œ ë²ˆì— ë°›ê¸° (ì»¤ë§¨ë“œ ê°ì²´)

**í¼ ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë°”ì¸ë”©**:

```java
// DTO í´ë˜ìŠ¤
public class UserForm {
    private String username;
    private String email;
    private int age;

    // Getter, Setter í•„ìˆ˜!
    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }

    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }

    public int getAge() { return age; }
    public void setAge(int age) { this.age = age; }
}

// Controller
@Controller
public class UserController {

    @PostMapping("/users")
    public String createUser(UserForm form) {
        // form.getUsername(), form.getEmail(), form.getAge() ìë™ ë°”ì¸ë”©!
        System.out.println("ì´ë¦„: " + form.getUsername());
        System.out.println("ì´ë©”ì¼: " + form.getEmail());
        System.out.println("ë‚˜ì´: " + form.getAge());

        return "redirect:/users";
    }
}
```

**HTML í¼**:
```html
<form action="/users" method="post">
    <input type="text" name="username" />
    <input type="email" name="email" />
    <input type="number" name="age" />
    <button type="submit">ë“±ë¡</button>
</form>
```

**ìë™ ë°”ì¸ë”© ê·œì¹™**:
- HTML inputì˜ `name` ì†ì„± = DTO í•„ë“œëª…
- Setter ë©”ì„œë“œ í•„ìˆ˜
- íƒ€ì… ìë™ ë³€í™˜

### 3.6 Django MTV íŒ¨í„´ê³¼ ë¹„êµ

Djangoë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆë‹¤ë©´, Spring MVCì™€ ë§ì€ ìœ ì‚¬ì ì„ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### Django views.py vs Spring Boot Controller

**Django (Python)**:
```python
from django.shortcuts import render

def profile(request, username):
    context = {
        'username': username,
    }
    return render(request, 'profile.html', context)

def cube(request, number):
    result = number ** 3
    context = {
        'number': number,
        'result': result,
    }
    return render(request, 'cube.html', context)
```

**Spring Boot (Java)**:
```java
@Controller
public class ExampleController {

    @GetMapping("/profile/{username}")
    public String profile(@PathVariable String username, Model model) {
        model.addAttribute("username", username);
        return "profile";
    }

    @GetMapping("/cube/{number}")
    public String cube(@PathVariable int number, Model model) {
        int result = (int) Math.pow(number, 3);
        model.addAttribute("number", number);
        model.addAttribute("result", result);
        return "cube";
    }
}
```

**ì£¼ìš” ì°¨ì´ì **:

| Django | Spring Boot |
|--------|-------------|
| `def profile(request, username)` | `@GetMapping("/profile/{username}")` |
| URL íŒ¨í„´ì€ urls.pyì— ì •ì˜ | URL íŒ¨í„´ì„ ë©”ì„œë“œì— ì§ì ‘ ì •ì˜ |
| `context = {'key': value}` | `model.addAttribute("key", value)` |
| `render(request, 'template.html', context)` | `return "template"` + Model |

#### ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬ ë¹„êµ

**Django**:
```python
def pong(request):
    title = request.GET.get('title')
    content = request.GET.get('content')

    context = {
        'title': title,
        'content': content,
    }
    return render(request, 'pong.html', context)
```

**Spring Boot**:
```java
@Controller
public class PingPongController {

    @GetMapping("/pong")
    public String pong(@RequestParam String title,
                       @RequestParam String content,
                       Model model) {
        model.addAttribute("title", title);
        model.addAttribute("content", content);
        return "pong";
    }
}
```

**Spring Bootì˜ ì¥ì **:
- íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ìë™ìœ¼ë¡œ ë³€í™˜ (ë¬¸ìì—´ â†’ ìˆ«ì ë“±)
- `@RequestParam(required = false)`, `defaultValue` ë“± ë‹¤ì–‘í•œ ì˜µì…˜
- ì»´íŒŒì¼ íƒ€ì„ì— íƒ€ì… ì²´í¬ ê°€ëŠ¥

---

## 4. Model ì‚¬ìš©í•˜ê¸°

### 4.1 Modelì´ë€?

**Controllerì—ì„œ Viewë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬**í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.

```java
@Controller
public class ProductController {

    @GetMapping("/products/{id}")
    public String getProduct(@PathVariable Long id, Model model) {
        // 1. ë°ì´í„° ì¡°íšŒ
        Product product = new Product(id, "ë…¸íŠ¸ë¶", 1000000);

        // 2. Modelì— ë°ì´í„° ì¶”ê°€
        model.addAttribute("product", product);
        model.addAttribute("message", "ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ì…ë‹ˆë‹¤.");

        // 3. View ì´ë¦„ ë°˜í™˜
        return "product/detail";
    }
}
```

### 4.2 Modelì— ë°ì´í„° ì¶”ê°€

**addAttribute() ë©”ì„œë“œ**:
```java
model.addAttribute("í‚¤", ê°’);
```

**ì˜ˆì‹œ**:
```java
@GetMapping("/dashboard")
public String dashboard(Model model) {
    model.addAttribute("username", "í™ê¸¸ë™");
    model.addAttribute("point", 1000);
    model.addAttribute("level", "Gold");

    List<String> messages = Arrays.asList("ë©”ì‹œì§€1", "ë©”ì‹œì§€2");
    model.addAttribute("messages", messages);

    return "dashboard";
}
```

### 4.3 Viewì—ì„œ Model ë°ì´í„° ì‚¬ìš©

**Thymeleaf í…œí”Œë¦¿**:
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>ëŒ€ì‹œë³´ë“œ</title></head>
<body>
    <h1 th:text="${username}">ì‚¬ìš©ìëª…</h1>
    <p>í¬ì¸íŠ¸: <span th:text="${point}">0</span></p>
    <p>ë“±ê¸‰: <span th:text="${level}">-</span></p>

    <ul>
        <li th:each="msg : ${messages}" th:text="${msg}"></li>
    </ul>
</body>
</html>
```

### 4.4 ModelAndView (ì„ íƒ)

Modelê³¼ Viewë¥¼ í•¨ê»˜ ë°˜í™˜í•˜ëŠ” ë°©ë²•:

```java
@GetMapping("/products/{id}")
public ModelAndView getProduct(@PathVariable Long id) {
    ModelAndView mav = new ModelAndView();

    Product product = new Product(id, "ë…¸íŠ¸ë¶", 1000000);

    mav.addObject("product", product);
    mav.setViewName("product/detail");

    return mav;
}
```

**ê¶Œì¥**: ê°„ê²°ì„±ì„ ìœ„í•´ `Model` íŒŒë¼ë¯¸í„° ë°©ì‹ ì‚¬ìš©

---

## 5. Redirect vs Forward

### 5.1 Redirect

**ìƒˆë¡œìš´ ìš”ì²­**ì„ ìƒì„±í•˜ì—¬ ë‹¤ë¥¸ URLë¡œ ì´ë™í•©ë‹ˆë‹¤.

```java
@PostMapping("/users")
public String createUser(UserForm form) {
    // ì‚¬ìš©ì ì €ì¥ ë¡œì§
    userService.save(form);

    // /users ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ìƒˆë¡œìš´ GET ìš”ì²­)
    return "redirect:/users";
}
```

**ë™ì‘ íë¦„**:
```
1. POST /users (í¼ ì œì¶œ)
2. Controller ì²˜ë¦¬
3. ë¸Œë¼ìš°ì €ì—ê²Œ "GET /usersë¡œ ë‹¤ì‹œ ìš”ì²­í•˜ì„¸ìš”" ì‘ë‹µ (302)
4. ë¸Œë¼ìš°ì €ê°€ GET /users ìš”ì²­
5. ëª©ë¡ í˜ì´ì§€ í‘œì‹œ
```

**íŠ¹ì§•**:
- URLì´ ë³€ê²½ë¨ (/users â†’ /users)
- ìƒˆë¡œìš´ ìš”ì²­ì´ë¯€ë¡œ Model ë°ì´í„° ì „ë‹¬ ì•ˆ ë¨
- **PRG íŒ¨í„´** (Post-Redirect-Get)ì— ì‚¬ìš©

### 5.2 Forward

**ê°™ì€ ìš”ì²­** ë‚´ì—ì„œ ë‹¤ë¥¸ Viewë¡œ ì´ë™í•©ë‹ˆë‹¤.

```java
@GetMapping("/old-url")
public String oldPage() {
    // ë‚´ë¶€ì ìœ¼ë¡œ new-urlë¡œ í¬ì›Œë”©
    return "forward:/new-url";
}

@GetMapping("/new-url")
public String newPage() {
    return "newPage";
}
```

**ë™ì‘ íë¦„**:
```
1. GET /old-url ìš”ì²­
2. ì„œë²„ ë‚´ë¶€ì—ì„œ /new-urlë¡œ í¬ì›Œë”©
3. URLì€ /old-urlë¡œ ìœ ì§€
4. newPage.html ì‘ë‹µ
```

**íŠ¹ì§•**:
- URLì´ ë³€ê²½ë˜ì§€ ì•ŠìŒ
- ê°™ì€ ìš”ì²­ì´ë¯€ë¡œ Model ë°ì´í„° ìœ ì§€
- **ì„œë²„ ë‚´ë¶€**ì—ì„œë§Œ ì´ë™

### 5.3 ë¹„êµí‘œ

| êµ¬ë¶„ | Redirect | Forward |
|------|----------|---------|
| ë°©ì‹ | ìƒˆë¡œìš´ ìš”ì²­ | ê°™ì€ ìš”ì²­ ë‚´ ì´ë™ |
| URL ë³€ê²½ | O | X |
| Model ìœ ì§€ | X | O |
| ìš©ë„ | POST í›„ ëª©ë¡ ì´ë™ | ë‚´ë¶€ í˜ì´ì§€ ì´ë™ |
| HTTP ìƒíƒœ | 302 | - |

### 5.4 PRG (Post-Redirect-Get) íŒ¨í„´

**ë¬¸ì œ ìƒí™©**:
```java
// ì˜ëª»ëœ ì˜ˆ
@PostMapping("/users")
public String createUser(UserForm form, Model model) {
    userService.save(form);
    model.addAttribute("users", userService.findAll());
    return "user/list";  // ë°”ë¡œ View ë°˜í™˜
}
```

```
POST /users â†’ ì‚¬ìš©ì ë“±ë¡
ë¸Œë¼ìš°ì €ê°€ ìƒˆë¡œê³ ì¹¨ (F5) â†’ POST /users ë‹¤ì‹œ ì‹¤í–‰!
â†’ ì¤‘ë³µ ë“±ë¡ ë°œìƒ! ğŸ˜±
```

**ì˜¬ë°”ë¥¸ ì˜ˆ (PRG íŒ¨í„´)**:
```java
@PostMapping("/users")
public String createUser(UserForm form) {
    userService.save(form);
    return "redirect:/users";  // GETìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
}

@GetMapping("/users")
public String listUsers(Model model) {
    model.addAttribute("users", userService.findAll());
    return "user/list";
}
```

```
POST /users â†’ ì‚¬ìš©ì ë“±ë¡
ë¦¬ë‹¤ì´ë ‰íŠ¸ â†’ GET /users
ë¸Œë¼ìš°ì €ê°€ ìƒˆë¡œê³ ì¹¨ (F5) â†’ GET /users ë‹¤ì‹œ ì‹¤í–‰
â†’ ëª©ë¡ë§Œ ë‹¤ì‹œ ì¡°íšŒ, ì¤‘ë³µ ë“±ë¡ ì—†ìŒ âœ…
```

---

## 6. ì‹¤ì „ ì˜ˆì œ: ê²Œì‹œíŒ

### 6.1 Model (Post.java)

```java
public class Post {
    private Long id;
    private String title;
    private String content;
    private String author;
    private LocalDateTime createdAt;

    public Post(Long id, String title, String content, String author) {
        this.id = id;
        this.title = title;
        this.content = content;
        this.author = author;
        this.createdAt = LocalDateTime.now();
    }

    // Getter, Setter
}
```

### 6.2 Controller

```java
@Controller
@RequestMapping("/posts")
public class PostController {

    // ì„ì‹œ ì €ì¥ì†Œ
    private List<Post> posts = new ArrayList<>();
    private Long nextId = 1L;

    // 1. ëª©ë¡ ì¡°íšŒ
    @GetMapping
    public String list(Model model) {
        model.addAttribute("posts", posts);
        return "post/list";
    }

    // 2. ìƒì„¸ ì¡°íšŒ
    @GetMapping("/{id}")
    public String detail(@PathVariable Long id, Model model) {
        Post post = posts.stream()
            .filter(p -> p.getId().equals(id))
            .findFirst()
            .orElse(null);

        if (post == null) {
            return "redirect:/posts";
        }

        model.addAttribute("post", post);
        return "post/detail";
    }

    // 3. ì‘ì„± í¼
    @GetMapping("/new")
    public String newForm() {
        return "post/form";
    }

    // 4. ì‘ì„± ì²˜ë¦¬
    @PostMapping
    public String create(@RequestParam String title,
                         @RequestParam String content,
                         @RequestParam String author) {
        Post post = new Post(nextId++, title, content, author);
        posts.add(post);

        return "redirect:/posts";  // PRG íŒ¨í„´
    }

    // 5. ì‚­ì œ
    @PostMapping("/{id}/delete")
    public String delete(@PathVariable Long id) {
        posts.removeIf(p -> p.getId().equals(id));
        return "redirect:/posts";
    }
}
```

### 6.3 View

**ëª©ë¡ (list.html)**:
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>ê²Œì‹œíŒ</title></head>
<body>
    <h1>ê²Œì‹œíŒ</h1>
    <a href="/posts/new">ê¸€ì“°ê¸°</a>

    <table>
        <tr>
            <th>ë²ˆí˜¸</th>
            <th>ì œëª©</th>
            <th>ì‘ì„±ì</th>
            <th>ì‘ì„±ì¼</th>
        </tr>
        <tr th:each="post : ${posts}">
            <td th:text="${post.id}">1</td>
            <td>
                <a th:href="@{/posts/{id}(id=${post.id})}"
                   th:text="${post.title}">ì œëª©</a>
            </td>
            <td th:text="${post.author}">ì‘ì„±ì</td>
            <td th:text="${post.createdAt}">ì‘ì„±ì¼</td>
        </tr>
    </table>
</body>
</html>
```

**ì‘ì„± í¼ (form.html)**:
```html
<!DOCTYPE html>
<html>
<head><title>ê¸€ì“°ê¸°</title></head>
<body>
    <h1>ê¸€ì“°ê¸°</h1>
    <form action="/posts" method="post">
        <input type="text" name="title" placeholder="ì œëª©" required />
        <textarea name="content" placeholder="ë‚´ìš©" required></textarea>
        <input type="text" name="author" placeholder="ì‘ì„±ì" required />
        <button type="submit">ì‘ì„±</button>
    </form>
</body>
</html>
```

---

## ì‹¤ìŠµ ë¬¸ì œ

### ë¬¸ì œ 1: ê³„ì‚°ê¸° í¼

**ìš”êµ¬ì‚¬í•­**:
- `/calculator` (GET): ê³„ì‚°ê¸° í¼ í‘œì‹œ
- `/calculator` (POST): ê³„ì‚° ê²°ê³¼ í‘œì‹œ

**í¼**:
```html
<form action="/calculator" method="post">
    <input type="number" name="num1" />
    <select name="operator">
        <option value="+">+</option>
        <option value="-">-</option>
        <option value="*">*</option>
        <option value="/">/</option>
    </select>
    <input type="number" name="num2" />
    <button type="submit">ê³„ì‚°</button>
</form>
```

<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

```java
@Controller
public class CalculatorController {

    @GetMapping("/calculator")
    public String form() {
        return "calculator/form";
    }

    @PostMapping("/calculator")
    public String calculate(@RequestParam int num1,
                            @RequestParam String operator,
                            @RequestParam int num2,
                            Model model) {
        int result = 0;

        switch (operator) {
            case "+": result = num1 + num2; break;
            case "-": result = num1 - num2; break;
            case "*": result = num1 * num2; break;
            case "/": result = num1 / num2; break;
        }

        model.addAttribute("num1", num1);
        model.addAttribute("operator", operator);
        model.addAttribute("num2", num2);
        model.addAttribute("result", result);

        return "calculator/result";
    }
}
```

</details>

---

## ì •ë¦¬

### í•µì‹¬ ìš”ì•½

1. **@Controller**: Controller í´ë˜ìŠ¤ ì„ ì–¸
2. **ìš”ì²­ ë§¤í•‘**:
   - @GetMapping, @PostMapping ë“±
   - @RequestMapping (í†µí•©)
3. **íŒŒë¼ë¯¸í„° ë°›ê¸°**:
   - @RequestParam (ì¿¼ë¦¬ ìŠ¤íŠ¸ë§, í¼)
   - @PathVariable (URL ê²½ë¡œ)
   - ê°ì²´ ë°”ì¸ë”© (ì»¤ë§¨ë“œ ê°ì²´)
4. **Model**: Viewì— ë°ì´í„° ì „ë‹¬
5. **Redirect vs Forward**:
   - Redirect: ìƒˆ ìš”ì²­, URL ë³€ê²½
   - Forward: ê°™ì€ ìš”ì²­, URL ìœ ì§€
6. **PRG íŒ¨í„´**: POST â†’ Redirect â†’ GET

### ë‹¤ìŒ ë‹¨ê³„

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” Thymeleaf í…œí”Œë¦¿ ì—”ì§„ì„ ê¹Šì´ ìˆê²Œ ë‹¤ë£¹ë‹ˆë‹¤!

---

## ê°•ì‚¬ ê°€ì´ë“œ

### ê°•ì˜ ì§„í–‰ íŒ

**1. ë‹¨ê³„ì  ì‹¤ìŠµ**
- ë¨¼ì € @RequestParamìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ
- ì ì§„ì ìœ¼ë¡œ ë³µì¡í•œ í¼ ì²˜ë¦¬
- ë§ˆì§€ë§‰ì— ê²Œì‹œíŒ ì˜ˆì œ

**2. ë„¤íŠ¸ì›Œí¬ íƒ­ í™œìš©**
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì—´ê¸°
- Redirect ì‹œ 302 ì‘ë‹µ í™•ì¸
- POST â†’ GET íë¦„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸°

**3. ì‹¤ìˆ˜ ê²½í—˜**
- Setter ì—†ìœ¼ë©´ ê°ì²´ ë°”ì¸ë”© ì•ˆ ë¨
- PRG íŒ¨í„´ ì•ˆ ì“°ë©´ ì¤‘ë³µ ë“±ë¡
- ì§ì ‘ ê²½í—˜í•˜ê²Œ í•˜ê¸°

### ì˜ˆìƒ ì§ˆë¬¸ê³¼ ë‹µë³€

**Q: @RequestParam ì—†ì´ íŒŒë¼ë¯¸í„° ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?**
A: ë„¤, íŒŒë¼ë¯¸í„°ëª…ê³¼ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ëª…ì´ ê°™ìœ¼ë©´ ìƒëµ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ ì“°ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.

**Q: Redirect ì‹œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ë ¤ë©´?**
A: RedirectAttributesë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Flash Attributeë¡œ ì¼íšŒì„± ë°ì´í„° ì „ë‹¬ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ë‚˜ì¤‘ì— ë°°ì›€)

**Q: ì™œ GETìœ¼ë¡œ ì‚­ì œí•˜ë©´ ì•ˆ ë˜ë‚˜ìš”?**
A: GETì€ ë©±ë“±ì„±ì´ ìˆì–´ì•¼ í•˜ê³ , í¬ë¡¤ëŸ¬ê°€ ë§í¬ë¥¼ í´ë¦­í•  ìˆ˜ ìˆì–´ ì˜ë„ì¹˜ ì•Šì€ ì‚­ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**[ì´ì „: 2.1 MVC íŒ¨í„´ ì´í•´](./2.1_MVC_íŒ¨í„´_ì´í•´.md)** | **[ë‹¤ìŒ: 2.3 Thymeleaf í…œí”Œë¦¿ ì—”ì§„](./2.3_Thymeleaf_í…œí”Œë¦¿_ì—”ì§„.md)**
