# 3.1. String 클래스 - 문자열 다루기

> String 클래스의 주요 메서드를 이해하고 문자열을 효과적으로 다룰 수 있다.

## String이란?

### 개념

**문자열(String)**은 문자(char)들의 집합으로, 텍스트 데이터를 표현하는 데 사용되는 참조 자료형입니다.

Java의 String은 **불변(immutable) 객체**로, 한번 생성된 문자열은 내용을 변경할 수 없습니다. 이는 JavaScript의 문자열과 동일한 특성입니다.

**JavaScript 비교**:
```javascript
let str = "hello";
str[0] = "H";  // 문자열은 불변이므로 변경되지 않음
console.log(str); // "hello" (그대로)
```

### 문자열 생성 방법

문자열은 두 가지 방법으로 생성할 수 있습니다.

```java
String word1 = new String("hello");  // 방법 1: new 키워드 사용
String word2 = "hello";              // 방법 2: 리터럴 사용 (권장)
```

#### 두 방법의 차이점

```java
String word1 = new String("hello");
String word2 = new String("hello");
String word3 = "hello";
String word4 = "hello";

System.out.println("word1 == word2: " + (word1 == word2));  // false
System.out.println("word3 == word4: " + (word3 == word4));  // true
```

- **`new String()`**: 매번 새로운 객체를 생성합니다. word1과 word2는 같은 값을 가지지만 서로 다른 객체입니다.
- **리터럴(`""`)**:  동일한 문자열은 메모리에서 재사용됩니다. word3와 word4는 같은 객체를 참조합니다.

문자열은 불변 객체이기 때문에 리터럴을 통해 여러 번 재사용해도 문제가 없으며, **메모리 효율성과 가독성을 고려하여 리터럴 방식을 주로 사용**합니다.

**JavaScript 비교**:
```javascript
// JavaScript에서는 리터럴만 사용
let str1 = "hello";
let str2 = "hello";
console.log(str1 === str2); // true
```

---

## 문자열의 결합 (Concatenation)

문자열은 덧셈 연산자(`+`)를 통해 결합할 수 있습니다.

```java
System.out.println("Hello" + " " + "Java!");  // Hello Java!
System.out.println("Java" + 21);               // Java21
System.out.println(2024 + "-" + 10 + "-" + 30); // 2024-10-30
```

- 문자열과 다른 자료형을 더하면 자동으로 문자열로 형변환됩니다.
- JavaScript의 문자열 연산과 동일합니다.

### 연산 순서 주의

덧셈은 왼쪽부터 순차적으로 이루어지므로 순서가 중요합니다.

```java
System.out.println(1 + 1 + "1");  // 21
System.out.println("1" + 1 + 1);  // 111
System.out.println(1 + "1" + 1);  // 111
```

- 첫 번째: `1 + 1` (숫자 연산) → `2`, 그 다음 `2 + "1"` → `"21"`
- 두 번째, 세 번째: 문자열이 먼저 나오면 이후는 모두 문자열 결합

**JavaScript 비교**:
```javascript
console.log(1 + 1 + "1");  // "21"
console.log("1" + 1 + 1);  // "111"
```

### 문자열은 불변(Immutable)

문자열을 결합할 때마다 새로운 문자열이 생성됩니다.

```java
String word1 = "hello";
String word2 = "world";

System.out.println(System.identityHashCode(word1));  // 664740647

word1 += word2;  // word1에 word2를 결합

System.out.println(System.identityHashCode(word1));  // 804564176 (변경됨!)
```

`word1 += word2`를 실행하면 "hello"가 변경되는 것이 아니라, "helloworld"라는 **새로운 문자열**이 생성되고 word1은 이 새로운 객체를 참조하게 됩니다.

---

## 자주 사용하는 String 메서드

### 문자열 정보 조회

#### `.length()` - 문자열 길이

문자열의 길이를 반환합니다.

```java
String word = "banana";
System.out.println(word.length());  // 6
```

**JavaScript 비교**:
```javascript
let word = "banana";
console.log(word.length);  // 6 (메서드가 아닌 속성)
```

#### `.isEmpty()` - 빈 문자열 여부

문자열의 길이가 0인지 여부를 반환합니다.

```java
String word1 = "";           // 빈 문자열
String word2 = "      ";     // 공백만 있는 문자열

System.out.println(word1.isEmpty());  // true
System.out.println(word2.isEmpty());  // false (공백도 문자)
```

#### `.isBlank()` - 공백 문자열 여부

문자열이 비어있거나 공백 문자(띄어쓰기, 탭, 개행)만 있는지 여부를 반환합니다.

```java
String word1 = "";           // 빈 문자열
String word2 = "      ";     // 공백만 있는 문자열
String word3 = "\n";         // 개행

System.out.println(word1.isBlank());  // true
System.out.println(word2.isBlank());  // true
System.out.println(word3.isBlank());  // true
```

### 문자 접근 및 변환

#### `.charAt(int index)` - 특정 위치의 문자

문자열의 index 번째 문자를 반환합니다.

```java
String word = "banana";

System.out.println(word.charAt(0));  // b
System.out.println(word.charAt(1));  // a
System.out.println(word.charAt(4));  // n
```

**JavaScript 비교**:
```javascript
let word = "banana";
console.log(word.charAt(0));  // "b"
console.log(word[0]);         // "b" (배열 인덱싱도 가능)
```

Java에서는 `word[0]` 같은 배열 인덱싱 문법을 문자열에 사용할 수 없습니다.

#### `.toCharArray()` - 문자 배열로 변환

문자열을 문자(char) 배열로 변환합니다. 문자열을 순회할 때 유용합니다.

```java
String word = "banana";
char[] characters = word.toCharArray();

for (char c : characters) {
    System.out.println(c);
}
// b
// a
// n
// a
// n
// a
```

**JavaScript 비교**:
```javascript
let word = "banana";
let chars = word.split("");  // ["b", "a", "n", "a", "n", "a"]
```

### 문자열 검색

#### `.contains(String str)` - 포함 여부

특정 문자열이 포함되어 있는지 여부를 반환합니다.

```java
String word = "banana";

System.out.println(word.contains("n"));     // true
System.out.println(word.contains("ana"));   // true
System.out.println(word.contains("f"));     // false
```

**JavaScript 비교**:
```javascript
let word = "banana";
console.log(word.includes("ana"));  // true
```

#### `.indexOf(String str)` - 문자열 위치 찾기

특정 문자열이 처음 나타나는 인덱스를 반환합니다. 찾지 못하면 `-1`을 반환합니다.

```java
String word = "banana";

System.out.println(word.indexOf("b"));     // 0
System.out.println(word.indexOf("a"));     // 1 (첫 번째 'a'의 위치)
System.out.println(word.indexOf("nana"));  // 2 (시작 위치)
System.out.println(word.indexOf("f"));     // -1 (없음)
```

**JavaScript 비교**:
```javascript
let word = "banana";
console.log(word.indexOf("a"));  // 1
```

### 문자열 변환

#### `.trim()` - 앞뒤 공백 제거

문자열의 앞뒤 공백을 제거한 새로운 문자열을 반환합니다.

```java
String word = "     Hello World!    ";
String trimmedWord = word.trim();

System.out.println(word);         //      Hello World!
System.out.println(trimmedWord);  // Hello World!
```

**JavaScript 비교**:
```javascript
let word = "     Hello World!    ";
console.log(word.trim());  // "Hello World!"
```

#### `.replace(String old, String new)` - 문자열 교체

특정 문자열을 모두 새로운 문자열로 교체한 새로운 문자열을 반환합니다.

```java
String word = "banana";

System.out.println(word.replace("a", "b"));   // bbnbnb
System.out.println(word.replace("an", "TT")); // bTTTTa
System.out.println(word.replace("b", ""));    // anana (b 제거)
System.out.println(word);                     // banana (원본 불변)
```

**JavaScript 비교**:
```javascript
let word = "banana";
console.log(word.replace("a", "b"));     // "bbnana" (첫 번째만)
console.log(word.replaceAll("a", "b"));  // "bbnbnb" (모두)
```

Java의 `replace()`는 모든 일치하는 문자열을 교체합니다.

#### `.substring(int start, int end)` - 문자열 자르기

문자열의 일부분을 잘라낸 새로운 문자열을 반환합니다. start는 포함, end는 불포함입니다.

```java
String word = "banana";

System.out.println(word.substring(1, 3));  // an (인덱스 1~2)
System.out.println(word.substring(2));     // nana (인덱스 2부터 끝까지)
```

**JavaScript 비교**:
```javascript
let word = "banana";
console.log(word.substring(1, 3));  // "an"
console.log(word.slice(1, 3));      // "an"
```

#### `.split(String regex)` - 문자열 분할

문자열을 구분자를 기준으로 분할하여 배열로 반환합니다.

```java
String sentence = "Hello new world";
String[] tokens = sentence.split(" ");  // 공백 기준 분할

System.out.println(Arrays.toString(tokens));  // [Hello, new, world]
```

```java
String email = "hello@world.com";
String[] tokens = email.split("@");  // @ 기준 분할

System.out.println(Arrays.toString(tokens));  // [hello, world.com]
```

**JavaScript 비교**:
```javascript
let sentence = "Hello new world";
let tokens = sentence.split(" ");
console.log(tokens);  // ["Hello", "new", "world"]
```

### 문자열 비교

#### `.equals(String str)` - 문자열 값 비교

특정 문자열과 값이 같은지 여부를 반환합니다.

```java
String a = new String("hello");
String b = "hello";

System.out.println(a == b);       // false (동일성: 다른 객체)
System.out.println(a.equals(b));  // true (동등성: 같은 값)
```

**중요**: Java에서 문자열 비교 시 **반드시 `.equals()`를 사용**해야 합니다!

- `==`: 두 변수가 같은 객체를 참조하는지 비교 (동일성)
- `.equals()`: 두 문자열의 값이 같은지 비교 (동등성)

**JavaScript 비교**:
```javascript
let a = "hello";
let b = "hello";
console.log(a === b);  // true (값 비교)
```

JavaScript는 `===` 연산자로 문자열 값을 비교할 수 있지만, Java는 참조형이므로 `.equals()`를 사용해야 합니다.

### 정적 메서드

#### `String.join(String delimiter, String... elements)` - 문자열 결합

문자열 배열을 구분자로 연결한 새로운 문자열을 반환합니다.

```java
String[] words = {"Hello", "new", "world"};
String sentence = String.join(" ", words);

System.out.println(sentence);  // Hello new world
```

```java
String[] words = {"Hello", "new", "world"};
String sentence = String.join("-", words);

System.out.println(sentence);  // Hello-new-world
```

**JavaScript 비교**:
```javascript
let words = ["Hello", "new", "world"];
console.log(words.join(" "));   // "Hello new world"
console.log(words.join("-"));   // "Hello-new-world"
```

---

## 문자열 포매팅 (String Formatting)

동적으로 변하는 값들을 이용해서 문자열을 원하는 대로 만드는 것을 **문자열 포매팅**이라 합니다.

### 1. `System.out.printf()` - 형식 지정 출력

형식에 맞춰서 문자열을 출력합니다.

```java
String pattern = "저는 %d살의 %s입니다.";
int age = 30;
String name = "kyle";

System.out.printf(pattern, age, name);  // 저는 30살의 kyle입니다.
```

**주요 지시자**:
- `%s`: 문자열
- `%d`: 10진수 정수
- `%f`: 실수
- `%c`: 문자
- `%b`: boolean
- `%n`: 개행

**주의**: `println()`과 달리 자동 개행되지 않습니다.

### 2. `String.format()` - 형식 지정 문자열 생성

형식에 맞춰서 문자열을 생성하여 반환합니다.

```java
String pattern = "저는 %d살의 %s입니다.";
int age = 30;
String name = "kyle";

String sentence = String.format(pattern, age, name);
System.out.println(sentence);  // 저는 30살의 kyle입니다.
```

`printf()`와 달리 바로 출력하지 않고 문자열을 반환하므로 변수에 할당할 수 있습니다.

**JavaScript 비교**:
```javascript
let age = 30;
let name = "kyle";

// 템플릿 리터럴
let sentence = `저는 ${age}살의 ${name}입니다.`;
console.log(sentence);  // 저는 30살의 kyle입니다.
```

### 3. `MessageFormat.format()` - 위치 기반 포매팅

인덱스 번호로 값을 지정하는 방식입니다.

```java
import java.text.MessageFormat;

String pattern = "저는 {0}살의 {1}입니다.";
int age = 30;
String name = "kyle";

String sentence = MessageFormat.format(pattern, age, name);
System.out.println(sentence);  // 저는 30살의 kyle입니다.
```

- 지시자 대신 `{0}`, `{1}` 같은 위치 인덱스를 사용합니다.
- 타입을 신경 쓰지 않아도 되어 더 직관적입니다.

---

## StringBuilder - 가변 문자열

### 개념

String은 불변(immutable)이므로, 문자열 연산 시 매번 새로운 객체가 생성되어 메모리 효율이 떨어집니다.

문자열 변경이 빈번한 경우를 위해 Java는 **가변(mutable) 문자열 클래스**인 `StringBuilder`를 제공합니다.

**JavaScript 비교**: JavaScript의 문자열도 불변이지만, 별도의 가변 문자열 클래스는 없습니다. 대신 배열을 사용하여 비슷한 효과를 낼 수 있습니다.

### 생성

```java
StringBuilder sb = new StringBuilder();
StringBuilder sb2 = new StringBuilder("초기값");
```

### 주요 메서드

#### `.append(String str)` - 문자열 추가

StringBuilder에 문자열을 추가합니다.

```java
StringBuilder sb = new StringBuilder();
sb.append("a");
sb.append("b");
sb.append("c");

String word = sb.toString();  // StringBuilder -> String
System.out.println(word);  // abc
```

#### `.insert(int index, String str)` - 특정 위치에 삽입

```java
StringBuilder sb = new StringBuilder("ACD");
sb.insert(1, "B");  // 1번 인덱스에 "B" 삽입

System.out.println(sb.toString());  // ABCD
```

#### `.delete(int start, int end)` - 구간 삭제

```java
StringBuilder sb = new StringBuilder("Algorithm");
sb.delete(2, 6);  // 인덱스 2~5 삭제

System.out.println(sb.toString());  // Althm
```

#### `.deleteCharAt(int index)` - 한 글자 삭제

```java
StringBuilder sb = new StringBuilder("Algorithm");
sb.deleteCharAt(2);  // 인덱스 2 삭제

System.out.println(sb.toString());  // Alorithm
```

#### `.reverse()` - 문자열 뒤집기

```java
StringBuilder sb = new StringBuilder("abc");
sb.reverse();

System.out.println(sb.toString());  // cba
```

**JavaScript 비교**:
```javascript
let chars = ["a", "b", "c"];
chars.push("d");          // append와 유사
chars.reverse();          // 배열 뒤집기
let str = chars.join(""); // 문자열로 변환
```

---

## 요약

- **String**: 불변(immutable) 문자열 클래스
  - 리터럴(`""`) 방식으로 생성 권장
  - 문자열 비교 시 반드시 `.equals()` 사용
- **주요 메서드**: `length()`, `charAt()`, `substring()`, `split()`, `replace()`, `trim()` 등
- **문자열 포매팅**: `printf()`, `String.format()`, `MessageFormat.format()`
- **StringBuilder**: 가변(mutable) 문자열 클래스
  - 문자열 변경이 빈번한 경우 사용
  - `append()`, `insert()`, `delete()`, `reverse()` 등의 메서드 제공
