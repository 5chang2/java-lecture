# 1.3. 기본 레이아웃 만들기

웹 애플리케이션은 대부분의 페이지에서 공통적인 상단 내비게이션 바, 푸터, 기본 스타일 등을 공유합니다. 이번 챕터에서는 Thymeleaf의 레이아웃 기능을 사용하여 프로젝트의 기본 뼈대가 될 `base.html`을 만들고, Bootstrap을 적용하여 세련된 UI의 기초를 다집니다.

---

## 1. Bootstrap 5 CDN 추가

먼저, 모든 페이지에 Bootstrap의 CSS와 JavaScript를 적용하기 위해 CDN(Content Delivery Network) 링크를 사용하겠습니다. `src/main/resources/templates/` 경로에 `base.html` 파일을 새로 생성하고 다음 코드를 작성합니다.

```html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Insta Clone</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <!-- 기본 콘텐츠가 들어갈 자리 -->
    <h1>Hello, World!</h1>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```

- `xmlns:th="http://www.thymeleaf.org"`: Thymeleaf 문법을 사용하기 위해 html 태그에 추가하는 네임스페이스입니다.

---

## 2. Controller 생성 및 테스트

이 `base.html`을 화면에 띄워보기 위해 간단한 컨트롤러를 작성합니다.
`src/main/java/com/example/instaclone/` 경로에 `HomeController.java` 파일을 생성합니다.

```java
package com.example.instaclone;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HomeController {

    @GetMapping("/")
    public String home() {
        return "base"; // templates/base.html 을 렌더링
    }
}
```

- `@Controller`: 이 클래스가 웹 요청을 처리하는 컨트롤러임을 나타냅니다.
- `@GetMapping("/")`: HTTP GET 요청이 루트 경로(`/`)로 들어올 때 `home()` 메서드를 실행합니다.
- `return "base"`: `templates` 폴더 아래의 `base.html` 파일을 찾아 렌더링하라는 의미입니다.

이제 애플리케이션을 실행하고 브라우저에서 `http://localhost:8080`으로 접속하면 "Hello, World!"가 Bootstrap 스타일이 적용된 채로 나타나는 것을 볼 수 있습니다.

---

## 3. Thymeleaf 레이아웃 기능으로 분리하기

공통 부분을 조각(Fragment)으로 분리하여 재사용성을 높여보겠습니다. Django의 `{% include %}`와 유사한 기능입니다.

#### 1) 내비게이션 바 프래그먼트 생성

`src/main/resources/templates/fragments/` 경로에 `navbar.html` 파일을 생성하고 다음 코드를 작성합니다. (폴더가 없다면 새로 만드세요)

```html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light" th:fragment="navbar">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Insta Clone</a>
            <!-- ... (내비게이션 메뉴들) ... -->
        </div>
    </nav>
</body>
</html>
```

- `th:fragment="navbar"`: 이 `<nav>` 태그 부분이 `navbar`라는 이름의 재사용 가능한 조각임을 선언합니다.

#### 2) `base.html`에 프래그먼트 삽입

이제 `base.html`을 수정하여 `navbar` 프래그먼트를 포함시키고, 다른 페이지들이 콘텐츠를 채워넣을 수 있는 영역을 만듭니다.

```html
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>Insta Clone</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <!-- 내비게이션 바 삽입 -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <!-- 페이지별 콘텐츠 영역 -->
    <div class="container">
        <th:block layout:fragment="content"></th:block>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```

- `th:replace="~{fragments/navbar :: navbar}"`: `fragments/navbar.html` 파일의 `th:fragment="navbar"` 부분을 가져와 이 `<div>` 태그 전체를 대체합니다.
- `layout:fragment="content"`: 이 블록이 다른 페이지에 의해 채워질 내용(content) 영역임을 선언합니다. 이를 사용하려면 Thymeleaf Layout Dialect 의존성이 필요하지만, 여기서는 개념만 설명합니다. (실제 적용은 추후에)

---

## 4. Django와 비교 (`base.html`과 `include`, `block`)

Thymeleaf의 레이아웃 기능은 Django 템플릿 시스템과 매우 유사합니다.

- **`th:replace="~{fragments/navbar :: navbar}"`** 는 Django의 **`{% include 'navbar.html' %}`** 와 거의 동일한 역할을 합니다. 특정 HTML 조각을 현재 위치에 삽입합니다.

- **`<th:block layout:fragment="content"></th:block>`** 와 이를 사용하는 자식 템플릿의 구조는 Django의 **`{% block content %}{% endblock %}`** 과 **`{% extends 'base.html' %}`** 에 해당합니다. 부모 템플릿의 특정 영역을 자식 템플릿이 채워넣는 상속 구조를 만듭니다.

이렇게 `base.html`을 만들어두면, 앞으로 생성할 모든 페이지에서 이 파일을 재사용하여 일관된 UI를 유지할 수 있습니다.
