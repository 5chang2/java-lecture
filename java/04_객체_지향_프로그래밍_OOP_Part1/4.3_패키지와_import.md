# 4.3. 패키지와 import

> 패키지의 개념을 이해하고, import를 사용하여 다른 패키지의 클래스를 사용할 수 있다.

## 패키지란?

**패키지(Package)**는 관련된 클래스들을 묶어서 관리하는 **폴더(디렉토리) 구조**입니다. 파일 시스템에서 폴더로 파일을 정리하는 것처럼, Java에서는 패키지로 클래스를 정리합니다.

**JavaScript 비교**: JavaScript의 모듈 시스템 및 폴더 구조와 유사합니다.

```javascript
// JavaScript - 폴더 구조
src/
├── utils/
│   ├── string.js
│   └── math.js
└── models/
    └── user.js
```

```java
// Java - 패키지 구조
src/
├── utils/
│   ├── StringUtil.java
│   └── MathUtil.java
└── models/
    └── User.java
```

---

## 패키지를 사용하는 이유

### 1. 이름 충돌 방지

여러 개발자가 같은 이름의 클래스를 만들 수 있습니다. 패키지를 사용하면 이를 구분할 수 있습니다.

```java
// com.company1.User
package com.company1;
public class User {
    // 회사1의 User 클래스
}

// com.company2.User
package com.company2;
public class User {
    // 회사2의 User 클래스
}
```

두 클래스 모두 `User`라는 이름이지만, 패키지가 다르므로 충돌하지 않습니다.

### 2. 클래스의 분류 및 관리

관련된 클래스들을 그룹화하여 프로젝트 구조를 체계적으로 관리할 수 있습니다.

```
com.myapp.
├── controller/    (웹 컨트롤러)
├── service/       (비즈니스 로직)
├── repository/    (데이터베이스 접근)
└── model/         (데이터 모델)
```

### 3. 접근 제어

패키지를 기준으로 클래스의 접근 범위를 제어할 수 있습니다.

**JavaScript 비교**: Node.js의 모듈 시스템과 유사합니다.

```javascript
// JavaScript - 모듈화
// utils/math.js
export function add(a, b) {
    return a + b;
}

// app.js
import { add } from './utils/math.js';
```

---

## 패키지 선언

패키지는 Java 파일의 **첫 번째 줄**에 선언합니다.

### 문법

```java
package 패키지명;
```

### 예시

```java
// src/com/myapp/model/User.java
package com.myapp.model;

public class User {
    private String name;
    private int age;

    public User(String name, int age) {
        this.name = name;
        this.age = age;
    }
}
```

**중요 규칙**:
- 패키지 선언은 파일의 **첫 번째 줄**에 위치 (주석 제외)
- 패키지명은 **소문자**로 작성 (관례)
- 패키지명과 **폴더 구조**가 일치해야 함

---

## 패키지 명명 규칙

### 1. 도메인 역순 사용 (권장)

기업이나 조직의 도메인을 역순으로 사용하는 것이 일반적입니다.

```java
// 도메인: example.com
package com.example.projectname;

// 도메인: google.com
package com.google.android;

// 도메인: apache.org
package org.apache.commons;
```

**이유**: 전 세계적으로 고유한 패키지명을 보장하기 위함입니다.

### 2. 계층 구조

패키지는 `.`으로 계층을 구분합니다.

```java
package com.myapp.controller;      // 컨트롤러 패키지
package com.myapp.service;         // 서비스 패키지
package com.myapp.service.auth;    // 인증 서비스 패키지
package com.myapp.model;           // 모델 패키지
```

### 3. 명명 규칙

| 규칙 | 설명 | 예시 |
|:---|:---|:---|
| **소문자** | 패키지명은 모두 소문자 | `com.example` ✅<br>`com.Example` ❌ |
| **예약어 금지** | Java 예약어 사용 불가 | `com.class` ❌ |
| **의미 있는 이름** | 패키지의 역할을 나타내는 이름 | `controller`, `service`, `util` |

**JavaScript 비교**: npm 패키지 네이밍과 유사합니다.

```javascript
// npm 패키지
@company/project-name    // Java: com.company.projectname
@angular/core            // Java: com.angular.core
```

---

## import 문

다른 패키지의 클래스를 사용하려면 **import** 문으로 가져와야 합니다.

### 문법

```java
import 패키지명.클래스명;
```

### 예시

```java
// src/com/myapp/Main.java
package com.myapp;

import com.myapp.model.User;  // User 클래스 import

public class Main {
    public static void main(String[] args) {
        User user = new User("홍길동", 25);
        System.out.println(user);
    }
}
```

**JavaScript 비교**:

```javascript
// JavaScript - ES6 모듈
import { User } from './model/User.js';

const user = new User("홍길동", 25);
console.log(user);
```

---

## import 방식

### 1. 단일 클래스 import (권장)

필요한 클래스만 명시적으로 import 합니다.

```java
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
```

**장점**:
- 어떤 클래스를 사용하는지 명확함
- 이름 충돌 가능성 낮음

### 2. 와일드카드 import (*)

패키지 내의 모든 클래스를 import 합니다.

```java
import java.util.*;  // java.util 패키지의 모든 클래스
```

**단점**:
- 어떤 클래스를 사용하는지 불명확
- 이름 충돌 가능성 높음
- 하위 패키지는 포함되지 않음

```java
import java.util.*;           // java.util 패키지만
// import java.util.stream.*;  // java.util.stream은 별도 import 필요
```

**권장 사항**: 가급적 단일 클래스 import를 사용하세요!

**JavaScript 비교**:

```javascript
// 단일 import
import { ArrayList } from 'java.util';

// 전체 import
import * as util from 'java.util';
```

---

## import가 필요 없는 경우

### 1. 같은 패키지의 클래스

```java
// src/com/myapp/model/User.java
package com.myapp.model;

public class User {
    // ...
}

// src/com/myapp/model/Account.java
package com.myapp.model;

public class Account {
    private User user;  // 같은 패키지이므로 import 불필요

    public Account(User user) {
        this.user = user;
    }
}
```

### 2. java.lang 패키지

`java.lang` 패키지의 클래스는 자동으로 import 됩니다.

```java
// import 불필요
String text = "Hello";        // java.lang.String
System.out.println(text);     // java.lang.System
Integer num = 10;             // java.lang.Integer
```

**자주 사용하는 java.lang 클래스**:
- `String`, `Integer`, `Double`, `Boolean` 등 (Wrapper 클래스)
- `System`, `Math`
- `Object`, `Class`
- `Exception`, `RuntimeException`

---

## 완전한 클래스명 (Fully Qualified Name)

import 없이 패키지명을 포함한 전체 경로로 클래스를 사용할 수 있습니다.

```java
// import 사용
import java.util.ArrayList;

public class Main {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
    }
}

// import 없이 사용 (완전한 클래스명)
public class Main {
    public static void main(String[] args) {
        java.util.ArrayList<String> list = new java.util.ArrayList<>();
    }
}
```

**사용 시기**:
- 이름이 같은 클래스가 여러 패키지에 있을 때
- 한 번만 사용하는 클래스일 때

```java
// 예: Date 클래스가 두 패키지에 존재
import java.util.Date;

public class Main {
    public static void main(String[] args) {
        Date utilDate = new Date();                      // java.util.Date
        java.sql.Date sqlDate = new java.sql.Date(0);   // java.sql.Date (완전한 클래스명)
    }
}
```

---

## 패키지 실습 예제

### 프로젝트 구조

```
src/
├── Main.java
└── com/
    └── myapp/
        ├── model/
        │   ├── User.java
        │   └── Product.java
        └── util/
            └── StringUtil.java
```

### 1. User 클래스 작성

```java
// src/com/myapp/model/User.java
package com.myapp.model;

public class User {
    private String name;
    private int age;

    public User(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

    @Override
    public String toString() {
        return "User{name='" + name + "', age=" + age + "}";
    }
}
```

### 2. Product 클래스 작성

```java
// src/com/myapp/model/Product.java
package com.myapp.model;

public class Product {
    private String name;
    private int price;

    public Product(String name, int price) {
        this.name = name;
        this.price = price;
    }

    public String getName() {
        return name;
    }

    public int getPrice() {
        return price;
    }

    @Override
    public String toString() {
        return "Product{name='" + name + "', price=" + price + "}";
    }
}
```

### 3. StringUtil 클래스 작성

```java
// src/com/myapp/util/StringUtil.java
package com.myapp.util;

public class StringUtil {
    // 문자열 반복
    public static String repeat(String str, int count) {
        StringBuilder result = new StringBuilder();
        for (int i = 0; i < count; i++) {
            result.append(str);
        }
        return result.toString();
    }

    // 문자열 뒤집기
    public static String reverse(String str) {
        return new StringBuilder(str).reverse().toString();
    }
}
```

### 4. Main 클래스 작성

```java
// src/Main.java
import com.myapp.model.User;
import com.myapp.model.Product;
import com.myapp.util.StringUtil;

public class Main {
    public static void main(String[] args) {
        // User 사용
        User user = new User("홍길동", 25);
        System.out.println(user);

        // Product 사용
        Product product = new Product("노트북", 1500000);
        System.out.println(product);

        // StringUtil 사용
        String repeated = StringUtil.repeat("*", 10);
        System.out.println(repeated);  // **********

        String reversed = StringUtil.reverse("Hello");
        System.out.println(reversed);  // olleH
    }
}
```

**실행 결과**:
```
User{name='홍길동', age=25}
Product{name='노트북', price=1500000}
**********
olleH
```

---

## IntelliJ에서 패키지 생성하기

### 1. 패키지 생성

1. `src` 폴더를 마우스 오른쪽 버튼 클릭
2. `New` → `Package` 선택
3. 패키지명 입력 (예: `com.myapp.model`)
4. Enter 키 누름

### 2. 클래스 생성

1. 생성한 패키지를 마우스 오른쪽 버튼 클릭
2. `New` → `Java Class` 선택
3. 클래스명 입력 (예: `User`)
4. Enter 키 누름
5. 자동으로 package 선언이 추가됨

### 3. import 자동 완성

IntelliJ는 import를 자동으로 관리해줍니다:

- **자동 import**: 클래스 사용 시 `Alt + Enter`로 import 추가
- **import 정리**: `Ctrl + Alt + O` (Windows) / `Cmd + Option + O` (Mac)
- **자동 최적화**: 사용하지 않는 import 자동 제거

**꿀팁**: IntelliJ 설정에서 "Optimize imports on the fly"를 활성화하면 자동으로 import를 정리해줍니다.

---

## 주요 Java 표준 패키지

Java는 다양한 표준 패키지를 제공합니다.

| 패키지 | 설명 | 주요 클래스 |
|:---|:---|:---|
| `java.lang` | 기본 클래스 (자동 import) | String, Integer, System, Math |
| `java.util` | 유틸리티 및 컬렉션 | ArrayList, HashMap, Date, Scanner |
| `java.io` | 입출력 | File, InputStream, OutputStream |
| `java.time` | 날짜/시간 (Java 8+) | LocalDate, LocalTime, LocalDateTime |
| `java.net` | 네트워크 | URL, Socket, HttpURLConnection |
| `java.sql` | 데이터베이스 | Connection, Statement, ResultSet |

**사용 예시**:

```java
import java.util.ArrayList;
import java.util.HashMap;
import java.time.LocalDate;
import java.io.File;

public class Example {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        HashMap<String, Integer> map = new HashMap<>();
        LocalDate today = LocalDate.now();
        File file = new File("data.txt");
    }
}
```

---

## static import

static 멤버를 import하여 클래스명 없이 바로 사용할 수 있습니다.

### 문법

```java
import static 패키지명.클래스명.정적멤버;
import static 패키지명.클래스명.*;  // 모든 정적 멤버
```

### 예시

```java
// 일반 import
import java.lang.Math;

public class Main {
    public static void main(String[] args) {
        double result = Math.sqrt(16);
        double pi = Math.PI;
    }
}

// static import
import static java.lang.Math.sqrt;
import static java.lang.Math.PI;

public class Main {
    public static void main(String[] args) {
        double result = sqrt(16);  // Math. 생략 가능
        double pi = PI;            // Math. 생략 가능
    }
}
```

**주의**: static import를 남용하면 코드 가독성이 떨어질 수 있습니다. 메서드나 상수의 출처가 불명확해지기 때문입니다.

**권장 사용 시기**:
- Math 클래스의 메서드를 자주 사용할 때
- 테스트 코드 (JUnit의 assert 메서드 등)

```java
// 테스트 코드에서 유용
import static org.junit.Assert.*;

public class UserTest {
    public void testUser() {
        assertEquals(25, user.getAge());  // Assert. 생략
        assertTrue(user.isActive());      // Assert. 생략
    }
}
```

---

## 패키지와 접근 제어

패키지는 접근 제어자와 함께 사용되어 클래스의 가시성을 제어합니다.

| 접근 제어자 | 같은 패키지 | 다른 패키지 |
|:---|:---|:---|
| `public` | ✅ | ✅ |
| `protected` | ✅ | ✅ (상속 관계) |
| (default) | ✅ | ❌ |
| `private` | ❌ | ❌ |

```java
// com.myapp.model.User
package com.myapp.model;

public class User {           // public: 모든 패키지에서 접근 가능
    private String password;  // private: User 클래스 내부에서만 접근
}

// com.myapp.model.Internal
package com.myapp.model;

class Internal {              // default: 같은 패키지에서만 접근 가능
    // ...
}
```

---

## 실습 문제

### 문제 1: 계산기 패키지

다음 구조의 계산기 프로그램을 작성하세요.

```
src/
├── Main.java
└── com/
    └── calculator/
        ├── Calculator.java
        └── MathUtil.java
```

**Calculator.java**:
- `add(int a, int b)`: 두 수의 합
- `subtract(int a, int b)`: 두 수의 차
- `multiply(int a, int b)`: 두 수의 곱
- `divide(int a, int b)`: 두 수의 몫

**MathUtil.java**:
- `isEven(int num)`: 짝수 여부
- `isOdd(int num)`: 홀수 여부
- `max(int a, int b, int c)`: 세 수 중 최댓값

**Main.java**:
- Calculator와 MathUtil을 import하여 사용

### 문제 2: 도서 관리 시스템

다음 패키지 구조로 도서 관리 시스템을 작성하세요.

```
src/
├── Main.java
└── com/
    └── library/
        ├── model/
        │   ├── Book.java
        │   └── Member.java
        └── service/
            └── LibraryService.java
```

**Book.java**: 제목, 저자, ISBN
**Member.java**: 이름, 회원번호
**LibraryService.java**: 책 대출/반납 기능

---

## 요약

- **패키지**: 관련된 클래스들을 묶어서 관리하는 폴더 구조
- **패키지 선언**: `package 패키지명;` (파일의 첫 줄)
- **import**: `import 패키지명.클래스명;`
- **명명 규칙**:
  - 소문자 사용
  - 도메인 역순 (com.example.project)
  - 계층 구조 (점으로 구분)
- **import 불필요**:
  - 같은 패키지의 클래스
  - java.lang 패키지
- **완전한 클래스명**: `패키지명.클래스명` 전체 경로로 사용
- **static import**: static 멤버를 클래스명 없이 사용
- **장점**:
  - 이름 충돌 방지
  - 체계적인 관리
  - 접근 제어

**JavaScript와의 차이점**:
- Java: 패키지는 폴더 구조와 정확히 일치해야 함
- JavaScript: 모듈 경로는 상대적으로 유연함
