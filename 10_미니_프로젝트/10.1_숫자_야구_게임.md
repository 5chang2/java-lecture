# 10.1 미니 프로젝트: 숫자 야구 게임

## 프로젝트 개요

숫자 야구 게임은 컴퓨터가 생성한 3자리 숫자를 사용자가 맞추는 게임입니다. 사용자가 숫자를 입력하면 컴퓨터는 "스트라이크"와 "볼"의 개수를 알려줍니다.

**게임 규칙**:
- 컴퓨터는 1~9 사이의 서로 다른 숫자 3개를 무작위로 선택합니다 (중복 없음)
- 사용자는 3자리 숫자를 입력합니다
- **스트라이크(Strike)**: 숫자와 위치가 모두 일치
- **볼(Ball)**: 숫자는 있지만 위치가 다름
- **아웃(Out)**: 일치하는 숫자가 없음
- 3 스트라이크를 맞추면 게임 종료

---

## 학습 목표

이 프로젝트를 통해 다음을 학습합니다:

- ✅ 배열과 컬렉션 활용
- ✅ 반복문과 조건문
- ✅ 메서드 분리와 코드 구조화
- ✅ `Scanner`를 이용한 입력 처리
- ✅ `Random`을 이용한 난수 생성
- ✅ 예외 처리 (잘못된 입력)

---

## JavaScript와의 비교

### JavaScript 버전 (참고)

```javascript
// JavaScript로 구현한 숫자 야구 게임
const readline = require('readline');

class BaseballGame {
  constructor() {
    this.answer = this.generateAnswer();
    this.attempts = 0;
  }

  generateAnswer() {
    const numbers = [];
    while (numbers.length < 3) {
      const num = Math.floor(Math.random() * 9) + 1;
      if (!numbers.includes(num)) {
        numbers.push(num);
      }
    }
    return numbers;
  }

  check(guess) {
    let strike = 0;
    let ball = 0;

    for (let i = 0; i < 3; i++) {
      if (guess[i] === this.answer[i]) {
        strike++;
      } else if (this.answer.includes(guess[i])) {
        ball++;
      }
    }

    return { strike, ball };
  }
}

// 게임 실행
const game = new BaseballGame();
console.log('숫자 야구 게임을 시작합니다!');
// ... readline 인터페이스 설정
```

---

## Java 구현

### 1단계: 기본 구조 설계

```java
// BaseballGame.java
import java.util.*;

public class BaseballGame {
    private List<Integer> answer;
    private int attempts;
    private Scanner scanner;

    public BaseballGame() {
        this.answer = generateAnswer();
        this.attempts = 0;
        this.scanner = new Scanner(System.in);
    }

    // 정답 생성 메서드
    private List<Integer> generateAnswer() {
        List<Integer> numbers = new ArrayList<>();
        Random random = new Random();

        while (numbers.size() < 3) {
            int num = random.nextInt(9) + 1;  // 1~9 사이의 난수
            if (!numbers.contains(num)) {
                numbers.add(num);
            }
        }

        return numbers;
    }

    // 게임 시작
    public void start() {
        System.out.println("===== 숫자 야구 게임 =====");
        System.out.println("1~9 사이의 서로 다른 숫자 3개를 맞춰보세요!");
        System.out.println();

        while (true) {
            List<Integer> guess = getUserInput();
            attempts++;

            Result result = check(guess);
            result.print();

            if (result.isWin()) {
                System.out.println("\n🎉 정답입니다!");
                System.out.println("시도 횟수: " + attempts + "회");
                break;
            }
        }

        scanner.close();
    }

    // 사용자 입력 받기
    private List<Integer> getUserInput() {
        while (true) {
            try {
                System.out.print("숫자 3개를 입력하세요 (예: 1 2 3): ");
                String input = scanner.nextLine();
                String[] parts = input.trim().split("\\s+");

                if (parts.length != 3) {
                    System.out.println("⚠️  3개의 숫자를 입력해주세요.");
                    continue;
                }

                List<Integer> numbers = new ArrayList<>();
                for (String part : parts) {
                    int num = Integer.parseInt(part);

                    if (num < 1 || num > 9) {
                        System.out.println("⚠️  1~9 사이의 숫자만 입력 가능합니다.");
                        numbers.clear();
                        break;
                    }

                    if (numbers.contains(num)) {
                        System.out.println("⚠️  중복된 숫자는 입력할 수 없습니다.");
                        numbers.clear();
                        break;
                    }

                    numbers.add(num);
                }

                if (numbers.size() == 3) {
                    return numbers;
                }

            } catch (NumberFormatException e) {
                System.out.println("⚠️  숫자만 입력해주세요.");
            }
        }
    }

    // 스트라이크와 볼 판정
    private Result check(List<Integer> guess) {
        int strike = 0;
        int ball = 0;

        for (int i = 0; i < 3; i++) {
            if (guess.get(i).equals(answer.get(i))) {
                strike++;
            } else if (answer.contains(guess.get(i))) {
                ball++;
            }
        }

        return new Result(strike, ball);
    }

    // 결과를 담는 내부 클래스
    private static class Result {
        private int strike;
        private int ball;

        public Result(int strike, int ball) {
            this.strike = strike;
            this.ball = ball;
        }

        public boolean isWin() {
            return strike == 3;
        }

        public void print() {
            if (strike == 0 && ball == 0) {
                System.out.println("결과: 아웃!");
            } else {
                System.out.println("결과: " + strike + " 스트라이크, " + ball + " 볼");
            }
        }
    }

    // 메인 메서드
    public static void main(String[] args) {
        BaseballGame game = new BaseballGame();
        game.start();
    }
}
```

---

## 코드 설명

### 1. 정답 생성 (`generateAnswer`)

```java
private List<Integer> generateAnswer() {
    List<Integer> numbers = new ArrayList<>();
    Random random = new Random();

    while (numbers.size() < 3) {
        int num = random.nextInt(9) + 1;  // 1~9 사이의 난수
        if (!numbers.contains(num)) {      // 중복 체크
            numbers.add(num);
        }
    }

    return numbers;
}
```

**JavaScript와의 차이점**:
- JavaScript: `Math.random()`, `includes()`
- Java: `Random` 클래스, `contains()`
- Java는 명시적 타입 선언 필요 (`List<Integer>`)

### 2. 입력 검증 (`getUserInput`)

```java
// 예외 처리를 통한 안전한 입력
try {
    int num = Integer.parseInt(part);
    // 검증 로직
} catch (NumberFormatException e) {
    System.out.println("⚠️  숫자만 입력해주세요.");
}
```

**강의 포인트**:
- Java는 런타임 에러를 `try-catch`로 명시적으로 처리해야 함
- JavaScript는 `isNaN()`으로 체크하는 것과 대조

### 3. 결과 판정 (`check`)

```java
private Result check(List<Integer> guess) {
    int strike = 0;
    int ball = 0;

    for (int i = 0; i < 3; i++) {
        if (guess.get(i).equals(answer.get(i))) {  // equals() 사용!
            strike++;
        } else if (answer.contains(guess.get(i))) {
            ball++;
        }
    }

    return new Result(strike, ball);
}
```

**주의사항**:
- `Integer` 객체 비교는 `==`가 아닌 `equals()` 사용
- JavaScript의 `===`와 다른 개념

### 4. 내부 클래스 (`Result`)

```java
private static class Result {
    private int strike;
    private int ball;

    public Result(int strike, int ball) {
        this.strike = strike;
        this.ball = ball;
    }

    public boolean isWin() {
        return strike == 3;
    }
}
```

**설계 패턴**:
- 결과를 객체로 캡슐화
- JavaScript의 `{ strike, ball }` 객체 리터럴과 비교

---

## 실행 예시

```
===== 숫자 야구 게임 =====
1~9 사이의 서로 다른 숫자 3개를 맞춰보세요!

숫자 3개를 입력하세요 (예: 1 2 3): 1 2 3
결과: 1 스트라이크, 1 볼

숫자 3개를 입력하세요 (예: 1 2 3): 1 4 5
결과: 2 스트라이크, 0 볼

숫자 3개를 입력하세요 (예: 1 2 3): 1 4 6
결과: 3 스트라이크, 0 볼

🎉 정답입니다!
시도 횟수: 3회
```

---

## 확장 아이디어

### Level 2: 난이도 선택 기능

```java
public class BaseballGame {
    private int digitCount;  // 자릿수 (3, 4, 5)

    public BaseballGame(int digitCount) {
        this.digitCount = digitCount;
        this.answer = generateAnswer(digitCount);
    }

    private List<Integer> generateAnswer(int count) {
        // count만큼 난수 생성
    }
}
```

### Level 3: 게임 기록 저장

```java
public class GameRecord {
    private String playerName;
    private int attempts;
    private LocalDateTime playTime;

    // 게임 기록을 파일에 저장
    public void saveToFile() {
        // 파일 I/O
    }
}
```

### Level 4: 힌트 기능

```java
public void provideHint() {
    System.out.println("힌트: 정답에는 " + answer.get(0) + "이(가) 포함됩니다.");
}
```

---

## 실습 문제

### 문제 1: 재시작 기능 추가
게임이 끝난 후 "다시 하시겠습니까? (y/n)"를 물어보고, 'y'를 입력하면 새 게임을 시작하도록 기능을 추가하세요.

**힌트**:
```java
public void start() {
    do {
        playGame();
        System.out.print("다시 하시겠습니까? (y/n): ");
        String answer = scanner.nextLine();
        if (!answer.equalsIgnoreCase("y")) {
            break;
        }
    } while (true);
}
```

### 문제 2: 최고 기록 표시
게임을 여러 번 플레이할 때, 최소 시도 횟수(최고 기록)를 저장하고 표시하세요.

### 문제 3: 시간 제한 모드
각 입력마다 10초의 제한 시간을 두고, 시간 내에 입력하지 않으면 "아웃"으로 처리하세요.

---

## 답안 예시

### 문제 1 답안

```java
public class BaseballGame {
    // 기존 코드...

    public void start() {
        boolean playAgain = true;

        while (playAgain) {
            // 새 게임 초기화
            this.answer = generateAnswer();
            this.attempts = 0;

            // 게임 플레이
            playGame();

            // 재시작 여부 확인
            System.out.print("\n다시 하시겠습니까? (y/n): ");
            String input = scanner.nextLine().trim();
            playAgain = input.equalsIgnoreCase("y");
        }

        System.out.println("게임을 종료합니다. 감사합니다!");
        scanner.close();
    }

    private void playGame() {
        System.out.println("\n===== 숫자 야구 게임 =====");
        System.out.println("1~9 사이의 서로 다른 숫자 3개를 맞춰보세요!\n");

        while (true) {
            List<Integer> guess = getUserInput();
            attempts++;

            Result result = check(guess);
            result.print();

            if (result.isWin()) {
                System.out.println("\n🎉 정답입니다!");
                System.out.println("시도 횟수: " + attempts + "회");
                break;
            }
        }
    }
}
```

### 문제 2 답안

```java
public class BaseballGame {
    private int bestRecord = Integer.MAX_VALUE;  // 최고 기록

    private void playGame() {
        System.out.println("\n===== 숫자 야구 게임 =====");
        if (bestRecord != Integer.MAX_VALUE) {
            System.out.println("현재 최고 기록: " + bestRecord + "회");
        }
        System.out.println("1~9 사이의 서로 다른 숫자 3개를 맞춰보세요!\n");

        while (true) {
            List<Integer> guess = getUserInput();
            attempts++;

            Result result = check(guess);
            result.print();

            if (result.isWin()) {
                System.out.println("\n🎉 정답입니다!");
                System.out.println("시도 횟수: " + attempts + "회");

                // 최고 기록 갱신
                if (attempts < bestRecord) {
                    bestRecord = attempts;
                    System.out.println("🏆 신기록 달성!");
                }

                break;
            }
        }
    }
}
```

---

## 핵심 개념 정리

### Java vs JavaScript 비교표

| 기능 | JavaScript | Java |
|------|-----------|------|
| 난수 생성 | `Math.random()` | `Random.nextInt()` |
| 배열/리스트 | `Array`, `includes()` | `List<T>`, `contains()` |
| 입력 처리 | `readline` 모듈 | `Scanner` 클래스 |
| 예외 처리 | 선택적 | 명시적 `try-catch` |
| 객체 비교 | `===` | `equals()` |
| 타입 체크 | `isNaN()` | `NumberFormatException` |

### 배운 Java 개념

1. **컬렉션 프레임워크**: `List<Integer>`, `ArrayList`
2. **제네릭**: `List<Integer>`로 타입 안전성 확보
3. **예외 처리**: `try-catch`로 잘못된 입력 처리
4. **메서드 분리**: 각 기능을 독립적인 메서드로 구현
5. **내부 클래스**: `Result` 클래스로 결과 캡슐화
6. **입력 검증**: 중복, 범위, 타입 체크

---

## 강사 노트

### 수업 진행 팁

1. **단계적 구현** (3시간 분량):
   - 1단계 (30분): 정답 생성 로직만 구현
   - 2단계 (40분): 판정 로직 구현
   - 3단계 (50분): 입력 처리 및 검증
   - 4단계 (30분): 게임 루프 완성
   - 5단계 (30분): 확장 기능 추가

2. **강조할 JavaScript와의 차이점**:
   - `Integer` vs `int` (박싱/언박싱)
   - `equals()` vs `==` (객체 비교)
   - 명시적 예외 처리의 중요성
   - `Scanner`의 버퍼 처리 (`nextLine()` vs `nextInt()`)

3. **흔한 실수**:
   - `Integer` 비교 시 `==` 사용
   - `Scanner` 버퍼 문제 (nextInt() 후 nextLine() 사용)
   - `List.get(i) == List.get(i)` (객체 참조 비교)

4. **디버깅 팁**:
   ```java
   // 개발 중 정답 확인용 (제출 전 삭제)
   System.out.println("DEBUG - Answer: " + answer);
   ```

### 학습자 수준별 조언

**초급자**:
- 먼저 정답을 고정값으로 설정해서 판정 로직부터 구현
- 예외 처리는 나중에 추가

**중급자**:
- 난이도 선택 기능 추가
- Enum으로 게임 상태 관리

**고급자**:
- Stream API로 중복 체크 (`stream().distinct().count()`)
- 멀티플레이어 모드 구현
